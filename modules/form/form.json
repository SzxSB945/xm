[
    {"templateId":"3ja50","templateName":"批量添加","category":"IP分机","items":[{"itemId":"item-4976706096766712","itemTitle":"<span data-lang=\"startNum\">起始分机号码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"begin-telephone","name":"begin-telephone","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4976706096766712-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-4976706096766712-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-4976706096766712-control-1', parentItemId: 'item-4976706096766712'}\" />"}],"isMustField":true},{"itemId":"item-7053436167187475","itemTitle":"<span data-lang=\"dodGenerate\">DOD生成方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"dod-gen-type","name":"dod-gen-type","options":[{"text":"<span data-lang=\"useSameNumber\">使用同一号码</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"addOne\">逐个加一</span>","value":"1","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-7053436167187475-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-7053436167187475-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-7053436167187475-control-1', parentItemId: 'item-7053436167187475'}\" />"}],"isMustField":false},{"itemId":"item-07917181063134815","itemTitle":"<span data-lang=\"startLong\">起始长号</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"begin-long-number","name":"begin-long-number","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-07917181063134815-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-07917181063134815-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-07917181063134815-control-1', parentItemId: 'item-07917181063134815'}\" />"}],"isMustField":false},{"itemId":"item-0231821045308227","itemTitle":"<span data-lang=\"batchCount\">批量数</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"mayUse\">可使用</span>：<span class=\"remain-telephone\">0</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"batch-quantity","name":"batch-quantity","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"var batchQuantity = $.plugins.getValue(\"batch-quantity\");\nreturn /\\d+/.test(batchQuantity) && parseInt(batchQuantity) > 0 && parseInt(batchQuantity) <= window.id1370;","validateMsg":"return window.id1370 == 0 ? $.lang.get(\"noUsableLine\")  : $.lang.get(\"batchCountRange\") + \"1~\" + window.id1370;"}],"rawControls":[{"id":"item-0231821045308227-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-0231821045308227-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-0231821045308227-control-1', parentItemId: 'item-0231821045308227'}\" />"}],"isMustField":true},{"itemId":"item-6548770936007966","itemTitle":"<span data-lang=\"pwdGenerate\">注册密码生成方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-radio","id":"password-gen-type","name":"password-gen-type","options":[{"text":"<span data-lang=\"random\">随机生成</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"useSame\">使用同一密码</span>","value":"1","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6548770936007966-control-1","name":"ms-radio-control","title":"单选控件（ms-radio）","content":"<wbr id=\"item-6548770936007966-control-1\" ms-widget=\"{is: 'ms-radio-control', id: 'item-6548770936007966-control-1', parentItemId: 'item-6548770936007966'}\" />"}],"isMustField":false},{"itemId":"item-8703341609195874","itemTitle":"<span data-lang=\"pwdLength\">密码长度</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"password-length","name":"password-length","options":[{"text":"6","value":"6","selected":"false","isEditing":false},{"text":"7","value":"7","selected":"false","isEditing":false},{"text":"8","value":"8","selected":"false","isEditing":false},{"text":"9","value":"9","selected":"false","isEditing":false},{"text":"10","value":"10","selected":"false","isEditing":false},{"text":"11","value":"11","selected":"false","isEditing":false},{"text":"12","value":"12","selected":"false","isEditing":false},{"text":"13","value":"13","selected":"false","isEditing":false},{"text":"14","value":"14","selected":"false","isEditing":false},{"text":"15","value":"15","selected":"false","isEditing":false},{"text":"16","value":"16","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8703341609195874-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8703341609195874-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8703341609195874-control-1', parentItemId: 'item-8703341609195874'}\" />"}],"isMustField":false},{"itemId":"item-9137883721078104","itemTitle":"<span data-lang=\"pwdForm\">密码组成</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"password-consist","name":"password-consist","options":[{"text":"<span data-lang=\"number2\">数字</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"alphabetAndNumber\">字母+数字</span>","value":"1","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-9137883721078104-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-9137883721078104-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-9137883721078104-control-1', parentItemId: 'item-9137883721078104'}\" />"}],"isMustField":false},{"itemId":"item-36291608872446357","itemTitle":"<span data-lang=\"password\">密码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"password","name":"password","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-36291608872446357-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-36291608872446357-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-36291608872446357-control-1', parentItemId: 'item-36291608872446357'}\" />"}],"isMustField":false},{"itemId":"item-06684900197240529","itemTitle":"<span data-lang=\"userIPAddress\">使用IP鉴权时的IP地址</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"ip-address","name":"ip-address","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-06684900197240529-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-06684900197240529-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-06684900197240529-control-1', parentItemId: 'item-06684900197240529'}\" />"}],"isMustField":false},{"itemId":"item-17220589340534254","itemTitle":"<span data-lang=\"callJurisdiction\">呼出权限</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"auth","name":"auth","options":[{"text":"<span data-lang=\"disabled\">禁用</span>","value":"4","selected":"false","isEditing":false},{"text":"<span data-lang=\"internalCall\">内线</span>","value":"0","selected":"true","isEditing":false},{"text":"<span data-lang=\"cityCall\">市话</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"domestic\">国内</span>","value":"2","selected":"false","isEditing":false},{"text":"<span data-lang=\"international\">国际</span>","value":"3","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-17220589340534254-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-17220589340534254-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-17220589340534254-control-1', parentItemId: 'item-17220589340534254'}\" />"}],"isMustField":false},{"itemId":"item-11332141651018057","itemTitle":"<span data-lang=\"department\">部门</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"org","name":"org","options":[],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-11332141651018057-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-11332141651018057-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-11332141651018057-control-1', parentItemId: 'item-11332141651018057'}\" />"}],"isMustField":false},{"itemId":"item-8118997032189554","itemTitle":"<span data-lang=\"CRBT\">彩铃</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"ring","name":"ring","options":[],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8118997032189554-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8118997032189554-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8118997032189554-control-1', parentItemId: 'item-8118997032189554'}\" />"}],"isMustField":false},{"itemId":"item-663287731113529","itemTitle":"<span data-lang=\"open\">开启</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-checkbox","id":"open","name":"open","options":[{"text":"<span data-lang=\"useExtension\">启用分机</span>","value":"457","selected":"false","isEditing":false},{"text":"<span data-lang=\"callerID\">来显</span>","value":"440","selected":"false","isEditing":false},{"text":"<span data-lang=\"Record\">录音</span>","value":"594","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-663287731113529-control-1","name":"ms-checkbox-control","title":"多选控件（ms-checkbox）","content":"<wbr id=\"item-663287731113529-control-1\" ms-widget=\"{is: 'ms-checkbox-control', id: 'item-663287731113529-control-1', parentItemId: 'item-663287731113529'}\" />"}],"isMustField":false},{"itemId":"item-20208361441785772","itemTitle":"<span data-lang=\"callTransfer\">呼叫转移</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"call-transfer","name":"call-transfer","options":[{"text":"<span data-lang=\"colse\">关闭</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"allCallsTransfer\">全部来电转另一话机</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferWhenOutServer\">无法接听时转另一话机</span>","value":"2","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferWhenBusy\">遇忙时转另一话机</span>","value":"3","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferWhenNoAnswer\">无应答时转另一话机</span>","value":"4","selected":"false","isEditing":false},{"text":"<span data-lang=\"allCallsTransferVoice\">全部来电转语音留言</span>","value":"5","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferVoiceWhenBusy\">遇忙/无应答时转语音留言</span>","value":"6","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-20208361441785772-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-20208361441785772-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-20208361441785772-control-1', parentItemId: 'item-20208361441785772'}\" />"}],"isMustField":false},{"itemId":"item-9196886229162031","itemTitle":"<span data-lang=\"transferToPhone\">转移至号码</span>","alertWinInfo":"<div data-lang=\"transferMsg1\">填入目标分机或外线号码。其中，分机号码可直接填写，外线号码根据外呼拨号方式的配置不同，包含两种情况：</div>\n<div data-lang=\"transferMsg2\">1. 在直拨方式下，直接填写外线号码。如 13812345678。</div>\n<div data-lang=\"transferMsg3\">2. 在加前缀方式下，按”前缀,外线号码”的形式填写，如 9,13812345678。</div>","endOfLineInfo":"","isMore":false,"isMustField":false,"validateMsg":"","controls":[{"controlType":"ms-input","id":"id367","name":"id367","value":"","validate":"","validateFunction":"switch($('[name=\"call-transfer\"]').val()) {\n  case \"1\":\n  case \"2\":\n  case \"3\":\n  case \"4\":\n    if(!$('[name=\"id367\"]').val().length) {\n      return false;\n    }\n  default:\n    return true;\n}","reqParam":{"method":"","line_id":"","id":""},"validateMsg":"return $.lang.get(\"ipExtMsg6\", \"请输入转移号码\");","defaultSelectOption":true}],"rawControls":[{"id":"item-9196886229162031-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-9196886229162031-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-9196886229162031-control-1', parentItemId: 'item-9196886229162031'}\" />"}]},{"itemId":"item-9113870265564015","itemTitle":"<span data-lang=\"monitor\">监听</span>","alertWinInfo":"","endOfLineInfo":"","isMore":true,"controls":[{"controlType":"ms-select","id":"monitoring","name":"monitoring","options":[{"text":"<span data-lang=\"close\">关闭</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"global\">全局</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"onlyGroup\">仅组内</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-9113870265564015-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-9113870265564015-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-9113870265564015-control-1', parentItemId: 'item-9113870265564015'}\" />"}],"isMustField":false},{"itemId":"item-8919344038618715","itemTitle":"<span data-lang=\"override\">强插</span>","alertWinInfo":"","endOfLineInfo":"","isMore":true,"controls":[{"controlType":"ms-select","id":"force-insert","name":"force-insert","options":[{"text":"<span data-lang=\"close\">关闭</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"global\">全局</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"onlyGroup\">仅组内</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8919344038618715-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8919344038618715-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8919344038618715-control-1', parentItemId: 'item-8919344038618715'}\" />"}],"isMustField":false},{"itemId":"item-6912623308544887","itemTitle":"<span data-lang=\"function\">功能</span>","alertWinInfo":"","endOfLineInfo":"","isMore":true,"controls":[{"controlType":"ms-checkbox","id":"func","name":"func","options":[{"text":"<span data-lang=\"prohibitionSub\">禁止被代接</span>","value":"598","selected":"false","isEditing":false},{"text":"<span data-lang=\"waitCall\">呼叫等待</span>","value":"435","selected":"false","isEditing":false},{"text":"<span data-lang=\"call33\">拨*33外呼</span>","value":"1053","selected":"false","isEditing":false},{"text":"<span data-lang=\"callHold\">呼叫保持</span>","value":"434","selected":"false","isEditing":false},{"text":"<span data-lang=\"calledSwitch\">被叫转接</span>","value":"861","selected":"false","isEditing":false},{"text":"<span data-lang=\"callingSwitch\">主叫转接</span>","value":"439","selected":"false","isEditing":false},{"text":"<span data-lang=\"extensionMsg\">分机留言订阅</span>","value":"475","selected":"false","isEditing":false},{"text":"<span data-lang=\"noBeMonitored\">禁止被监听</span>","value":"189","selected":"false","isEditing":false},{"text":"<span data-lang=\"callingID\">呼叫等待中来电显示</span>","value":"441","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferOutside\">转接外线</span>","value":"593","selected":"false","isEditing":false},{"text":"<span data-lang=\"callBarring\">呼叫限制</span>","value":"893","selected":"false","isEditing":false},{"text":"<span data-lang=\"prohibitBargeIn\">禁止被强插</span>","value":"394","selected":"false","isEditing":false},{"text":"<span data-lang=\"instantRecord\">即时录音</span>","value":"359","selected":"false","isEditing":false},{"text":"<span data-lang=\"stationLock\">分机锁</span>","value":"592","selected":"false","isEditing":false},{"text":"<span data-lang=\"callTransfer\">呼叫转移</span>","value":"436","selected":"false","isEditing":false},{"text":"<span data-lang=\"allowNotDisturb\">允许话机设置免打扰</span>","value":"444","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6912623308544887-control-1","name":"ms-checkbox-control","title":"多选控件（ms-checkbox）","content":"<wbr id=\"item-6912623308544887-control-1\" ms-widget=\"{is: 'ms-checkbox-control', id: 'item-6912623308544887-control-1', parentItemId: 'item-6912623308544887'}\" />"}],"isMustField":false}],"hideCancelButton":true,"script":"// 初始化部门\nvar _nid = $.registSlowLoadNotify();\n\n$.om.api.getDepartments(function(departments) {\n  var orgOptions = [];\n\n  $.each(departments, function(i, department) {\n    orgOptions.push({\n      value: department.line_id,\n      text: department.id758\n    });\n  });\n\n  avalon.vmodels.org.options.push({ text: $.lang.get(\"pleaseChoose\"), value: \"\" });\n    \n  avalon.vmodels.org.options.pushArray(orgOptions);\n\n  // 初始化彩铃及可用的分机数\n  $.om.getDataParallel(\n    [\n      {method: \"gw.config.get\", param: {id: 771}},\n      {method: \"gw.config.get\", param: {id: [1369, 1370]}}\n    ], function(resp) {\n      $.unregistSlowLoadNotify(_nid);\n\n      var rings = resp[0].data.id771.split(\"|\");\n      \n      var files = [];\n\n      $.each(rings, function(i, ring) {\n        if(ring.indexOf(\"fring\") != -1) {\n            var r = ring.indexOf(\".\") != -1 ? ring.substring(0, ring.indexOf(\".\")) : ring;\n            \n            if(files.indexOf(r) == -1) {\n                files.push(r);\n            }\n        }\n      });\n\n      var fileOptions = [];\n      $.each(files, function(index, file) {\n        fileOptions.push({\n          value: file,\n          text: file\n        });\n      });\n\n      avalon.vmodels.ring.options.push({ text: $.lang.get(\"pleaseChoose\"), value: \"\" });\n      avalon.vmodels.ring.options.pushArray(fileOptions);\n      \n      window.id1369 = parseInt(resp[1].data.id1369);\n      window.id1370 = parseInt(resp[1].data.id1370);\n      $(\".remain-telephone\").html(window.id1370);\n  });\n});\n\n// 提交\nform.onSubmit = function(fields) {\n  if(!$.validator.validate()) {\n    return;\n  }\n\n  $.confirm($.lang.get(\"isBatchAdd\"), function() {\n    var auth = fields[\"auth\"].value;\n    var batchQuantity = fields[\"batch-quantity\"].value;\n    var beginLongNumber = fields[\"begin-long-number\"].value;\n    var beginTelephone = fields[\"begin-telephone\"].value;\n    var callTransfer = fields[\"call-transfer\"].value;\n    var dodGenType = fields[\"dod-gen-type\"].value;\n    var forceInsert = fields[\"force-insert\"].value;\n    var func = fields[\"func\"].value;\n    var ipAddress = fields[\"ip-address\"].value;\n    var monitoring = fields[\"monitoring\"].value;\n    var openFunc = fields[\"open\"].value;\n    var org = fields[\"org\"].value;\n    var password = fields[\"password\"].value;\n    var passwordConsist = fields[\"password-consist\"].value;\n    var passwordGenType = fields[\"password-gen-type\"].value;\n    var passwordLength = fields[\"password-length\"].value;\n    var ring = fields[\"ring\"].value;\n\n    // 生成随机密码\n    var randomPass = function(type, length) {\n      var nums = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n      var alphas = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\",\n                    \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \n                    \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \n                    \"u\", \"v\", \"w\", \"x\", \"y\", \"z\"];\n\n      var pass = \"\";\n\n      for(var i = 0; i < length; i++) {\n        pass += type == \"0\" ? nums[Math.floor(Math.random() * nums.length)] : \n        alphas[Math.floor(Math.random() * alphas.length)]\n      }\n\n      return pass;\n    };\n\n    var reqParamBase = {};\n    // 使用IP鉴权时的IP地址\n    if(ipAddress != \"\") {\n      reqParamBase.id571 = ipAddress;\n    }\n    // 权限\n    switch(auth) {\n      case \"0\":\n        reqParamBase.id447 = \"off\";\n        reqParamBase.id584 = \"0\";\n        break;\n      case \"1\":\n        reqParamBase.id447 = \"off\";\n        reqParamBase.id584 = \"1\";\n        break;\n      case \"2\":\n        reqParamBase.id447 = \"off\";\n        reqParamBase.id584 = \"2\";\n        break;\n      case \"3\":\n        reqParamBase.id447 = \"off\";\n        reqParamBase.id584 = \"3\";\n        break;\n      case \"4\":\n        reqParamBase.id447 = \"on\";\n        break;\n    }\n\n    // 部门\n    if(org != \"\" && !$.isUndefined(org)) {\n      reqParamBase.id653 = org;\n    }\n    // 彩铃\n    if(ring != \"\") {\n      reqParamBase.id468 = ring;\n    }\n    // 启用分机\n    if(openFunc.indexOf(\"457\") != -1) { reqParamBase.id457 = \"off\"; }\n    // 来显\n    if(openFunc.indexOf(\"440\") != -1) { reqParamBase.id440 = \"on\"; }\n    // 录音\n    if(openFunc.indexOf(\"594\") != -1) { reqParamBase.id594 = \"on\"; }\n\n    // 呼叫转移\n    switch(callTransfer) {\n      case \"0\":\n        reqParamBase.id366 = 0;\n        reqParamBase.id600 = 0;\n        break;\n      case \"1\":\n        reqParamBase.id366 = 1;\n        reqParamBase.id600 = 0;\n        break;\n      case \"2\":\n        reqParamBase.id366 = 2;\n        reqParamBase.id600 = 0;\n        break;\n      case \"3\":\n        reqParamBase.id366 = 3;\n        reqParamBase.id600 = 0;\n        break;\n      case \"4\":\n        reqParamBase.id366 = 4;\n        reqParamBase.id600 = 0;\n        break;\n      case \"5\":\n        reqParamBase.id366 = 0;\n        reqParamBase.id600 = 1;\n        break;\n      case \"6\":\n        reqParamBase.id366 = 0;\n        reqParamBase.id600 = 2;\n        break;\n    }\n\n    if(callTransfer == \"1\" ||\n      callTransfer == \"2\" ||\n      callTransfer == \"3\" ||\n      callTransfer == \"4\") {\n      reqParamBase.id367 = fields[\"id367\"].value;\n    }\n\n    // 监听\n    if(monitoring != \"\") {\n      reqParamBase.id192 = monitoring;\n    }\n\n    // 强插\n    if(forceInsert != \"\") {\n      reqParamBase.id393 = forceInsert;\n    }\n\n    // 禁止被代接\n    if(func.indexOf(\"598\") != -1) {\n      reqParamBase.id598 = \"on\";\n    }\n    // 呼叫等待\n    if(func.indexOf(\"435\") != -1) { reqParamBase.id435 = \"on\"; }\n    // 拨*33外呼\n    if(func.indexOf(\"1053\") != -1) { reqParamBase.id1053 = \"on\"; }\n    // 呼叫保持\n    if(func.indexOf(\"434\") != -1) { reqParamBase.id434 = \"on\"; }\n    // 被叫转接\n    if(func.indexOf(\"861\") != -1) { reqParamBase.id861 = \"off\"; }\n    // 主叫转接\n    if(func.indexOf(\"439\") != -1) { reqParamBase.id439 = \"on\"; }\n    // 分机留言订阅\n    if(func.indexOf(\"475\") != -1) { reqParamBase.id475 = \"on\"; }\n    // 禁止被监听\n    if(func.indexOf(\"189\") != -1) { reqParamBase.id189 = \"on\"; }\n    // 呼叫等待中来电显示\n    if(func.indexOf(\"441\") != -1) { reqParamBase.id441 = \"on\"; }\n    // 转接外线\n    if(func.indexOf(\"593\") != -1) { reqParamBase.id593 = \"on\"; }\n    // 呼叫限制\n    if(func.indexOf(\"893\") != -1) { reqParamBase.id893 = \"on\"; }\n    // 禁止被强插\n    if(func.indexOf(\"394\") != -1) { reqParamBase.id394 = \"on\"; }\n    // 即时录音\n    if(func.indexOf(\"359\") != -1) { reqParamBase.id359 = \"on\"; }\n    // 分机锁\n    if(func.indexOf(\"592\") != -1) { reqParamBase.id592 = \"1\"; }\n    // 呼叫转移\n    if(func.indexOf(\"436\") != -1) { reqParamBase.id436 = \"on\"; }\n    // 允许话机设置免打扰\n    if(func.indexOf(\"444\") != -1) { reqParamBase.id444 = \"on\"; }\n\n    var reqParams = [];\n    // dod起始号码\n    var dodBeginNumber = parseInt(beginLongNumber);\n    // 分机起始号码\n    var telephoneBeginNumber = parseInt(beginTelephone);\n    // line_id起始号码\n    //var lineIdBeginNumber = window.id1369 + 1;\n\n    // 批量生成\n    var tempReqParam = [];\n\n    for(var i = 0; i < batchQuantity; i++) {\n      var reqParam = {};\n\n      //reqParam.import = \"ext\";\n      // line_id\n      //reqParam.line_id = lineIdBeginNumber++;\n\n      // 分机号码\n      reqParam.id401 = telephoneBeginNumber++;\n\n      // dod\n      if(dodGenType && !isNaN(dodBeginNumber)) {\n        reqParam.id1302 = dodGenType == \"0\" ? dodBeginNumber : dodBeginNumber++;\n      }\n\n      // 密码\n      if(passwordGenType != \"\") {\n        reqParam.id591 = passwordGenType == \"0\" ? \n          randomPass(passwordConsist, passwordLength) :\n        password;\n      }\n\n      $.extend(true, reqParam, reqParamBase);\n\n      tempReqParam.push(reqParam);\n\n      // 当单条请求的批量数到达上限时\n      if(tempReqParam.length >= MAX_BATCH_ADD_COUNT) {\n        reqParams.push($.merge([], tempReqParam));\n        tempReqParam = [];\n      }\n    }\n\n    // push未添加的数据\n    if(tempReqParam.length) {\n      reqParams.push($.merge([], tempReqParam));\n    }\n\n    $.console.log(reqParams);\n    \n    var progress = $.progress({ text: $.lang.get(\"savingExtensionData\", 0, batchQuantity) });\n\n    // 已保存数量数量\n    var savedCount = 0;\n    // 当前数据index\n    var saveIndex = 0;\n\n    var saveData = function() {\n      var extraParam = saveIndex < reqParams.length - 1 ? \"continue=1&import=ext\" : \"import=ext\";\n\n      $.om.setData(\"gw.config.set\", reqParams[saveIndex], function(resp) {\n        if($.hasError(resp)) {\n            progress.close();\n            \n            $.showError(resp);\n            return;\n        }\n\n        savedCount += reqParams[saveIndex].length;\n        \n        progress.changeText($.lang.get(\"savingExtensionData\", savedCount, batchQuantity));\n        progress.changeProgress(parseInt(savedCount * 100 / batchQuantity));\n\n        saveIndex++;\n\n        if(saveIndex < reqParams.length) {\n          saveData();\n        }\n        else {\n          progress.close();\n\n          // 继续批量操作\n          var continueBatchAdd = function() {\n            //form.reset();\n            var index = $.load($.lang.get(\"loadingMsg1\"));\n    \n            // 获取可用的分机数\n            $.om.getData(\"gw.config.get\", {id: [1369, 1370]}, function(data) {\n              $.close(index);\n              \n              if(data.success) {\n                window.id1369 = parseInt(data.data.id1369);\n                window.id1370 = parseInt(data.data.id1370);\n                $(\".remain-telephone\").html(window.id1370);\n              }\n            });\n          };\n\n          // 批量添加成功\n          var batchAddSuccess = function() {\n            var index = $.load($.lang.get(\"loadingMsg2\"));\n\n            $.om.api.syncSetting(function() {\n              $.close(index);\n\n              $.open({\n                title: $.lang.get(\"hint\"),\n                icon: 1,\n                content: $.lang.get(\"batchAddSuccess\", savedCount),\n                success: function(layero, index){\n                  layero.find(\".open-ip-ext-tab\").click(function() {\n                    $.tab.openTab(\"a4liu\");\n                    $.close(index);\n                    continueBatchAdd();\n                  });\n                },\n                yes: function() {\n                  continueBatchAdd();\n                }\n              });\n            });\n          };\n\n          // 如果有错误\n          if($.om.hasError(resp)) {\n            var err = $.om.buildError(resp);\n\n            // 不是重启错误\n            if(!err.isRebootError) {\n              // 处理错误信息\n              $.processResp(resp, function() {\n                continueBatchAdd();\n              });\n            }\n            // 是重启错误，但这个不算做是错误\n            else {\n              batchAddSuccess();\n            }\n          }\n          else {\n            batchAddSuccess();\n          }\n        }\n      }, null, extraParam);\n    };\n\n    saveData();\n  });\n};\n\nform.onLoaded = function() {\n  //$('[name=\"begin-long-number\"]').parents(\".form-group\").hide();\n\n  $(document).on(\"change\", '[name=\"dod-gen-type\"]', function() {\n    if($(this).val() == \"\") {\n      $('[name=\"begin-long-number\"]').parents(\".form-group\").hide();\n    }\n    else {\n      $('[name=\"begin-long-number\"]').parents(\".form-group\").show();\n    }\n  });\n\n  $('[name=\"password-length\"], [name=\"password-consist\"], [name=\"password\"]').parents(\".form-group\").hide();\n\n  $('[name=\"password-gen-type\"]').change(function() {\n    if($(this).val() == \"1\") {\n      $('[name=\"password\"]').parents(\".form-group\").show();\n      $('[name=\"password-length\"], [name=\"password-consist\"]').parents(\".form-group\").hide();\n    }\n    else {\n      $('[name=\"password\"]').parents(\".form-group\").hide();\n      $('[name=\"password-length\"], [name=\"password-consist\"]').parents(\".form-group\").show();\n    }\n  });\n\n  $('[name=\"id367\"]').parents(\".form-group\").hide();\n  \n  $('[name=\"call-transfer\"]').change(function() {\n    switch($(this).val()) {\n      case \"1\":\n      case \"2\":\n      case \"3\":\n      case \"4\":\n        $('[name=\"id367\"]').parents(\".form-group\").show();\n        break;\n      default:\n        $('[name=\"id367\"]').parents(\".form-group\").hide();\n        break;\n    }\n  });\n\n  avalon.vmodels[\"func\"].onChange = function(value, changedOption, optionIndex) {\n    // 取消被叫转接时，连带取消主叫转接（与老OM功能保持一致）\n    if(changedOption.value == \"861\" && \n      changedOption.checked == false &&\n      avalon.vmodels[\"func\"].value.indexOf(\"439\") != -1) {\n        avalon.vmodels[\"func\"].value.splice(avalon.vmodels[\"func\"].value.indexOf(\"439\"), 1);\n    }\n\n    // 勾选主叫转接时，连带勾选被叫转接（与老OM功能保持一致）\n    if(changedOption.value == \"439\" && \n      changedOption.checked == true && \n      avalon.vmodels[\"func\"].value.indexOf(\"861\") == -1) {\n        avalon.vmodels[\"func\"].value.push(\"861\");\n    }\n  }\n};","style":"@charset \"utf-8\";\n/*删除本行在这里写css样式*/"},
 
	  {"templateId":"7hs3o","templateName":"注册选项","category":"SIP外线","items":[{"itemId":"item-4304529815685687","itemTitle":"<span data-lang=\"defaultServer\">默认注册服务器</span> ","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"registerOptionRemark1\">例：168.33.134.51:5000 或 www.sipproxy.com:5000 </span> ","isMore":false,"controls":[{"controlType":"ms-input","id":"local-server","name":"local-server","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4304529815685687-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-4304529815685687-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-4304529815685687-control-1', parentItemId: 'item-4304529815685687'}\" />"}],"isMustField":false},{"itemId":"item-5676412090057512","itemTitle":"<span data-lang=\"localPort\">本地端口</span> ","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"registerOptionRemark4\">（范围：1~9999，默认： 5060）</span> ","isMore":false,"controls":[{"controlType":"ms-input","id":"local-port","name":"local-port","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-5676412090057512-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-5676412090057512-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-5676412090057512-control-1', parentItemId: 'item-5676412090057512'}\" />"}],"isMustField":false},{"itemId":"item-7688139482002057","itemTitle":"<span data-lang=\"registOutTime\">注册超时</span> ","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"registerOptionRemark5\">秒（范围：15~86400，默认：600）</span> ","isMore":false,"controls":[{"controlType":"ms-input","id":"register-overtime","name":"register-overtime","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-7688139482002057-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-7688139482002057-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-7688139482002057-control-1', parentItemId: 'item-7688139482002057'}\" />"}],"isMustField":false},{"itemId":"item-43344027720260847","itemTitle":"<span data-lang=\"proxyServer\">代理服务器</span> ","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"registerOptionRemark2\">例：168.33.134.51:5000 或 www.sipproxy.com:5000</span> ","isMore":false,"controls":[{"controlType":"ms-input","id":"proxy-server","name":"proxy-server","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-43344027720260847-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-43344027720260847-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-43344027720260847-control-1', parentItemId: 'item-43344027720260847'}\" />"}],"isMustField":false},{"itemId":"item-4320216405413053","itemTitle":"<span data-lang=\"exchangeLocalPort\">交换本地端口增量值</span> ","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"increment","name":"increment","options":[{"text":"0","value":"0","selected":"true","isEditing":false},{"text":"1","value":"1","selected":"false","isEditing":false},{"text":"2","value":"2","selected":"false","isEditing":false},{"text":"3","value":"3","selected":"false","isEditing":false},{"text":"4","value":"4","selected":"false","isEditing":false},{"text":"5","value":"5","selected":"false","isEditing":false},{"text":"6","value":"6","selected":"false","isEditing":false},{"text":"7","value":"7","selected":"false","isEditing":false},{"text":"8","value":"8","selected":"false","isEditing":false},{"text":"9","value":"9","selected":"false","isEditing":false},{"text":"10","value":"10","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4320216405413053-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-4320216405413053-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-4320216405413053-control-1', parentItemId: 'item-4320216405413053'}\" />"}],"isMustField":false},{"itemId":"item-020309362846830492","itemTitle":"<span data-lang=\"registerMultiplePlatforms\">注册多平台</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"multiplatform","name":"multiplatform","options":[{"text":"<span data-lang=\"open\">开启</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"close\">关闭</span>","value":"0","selected":"true","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-020309362846830492-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-020309362846830492-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-020309362846830492-control-1', parentItemId: 'item-020309362846830492'}\" />"}],"isMustField":false},{"itemId":"item-9957762633184366","itemTitle":"<span data-lang=\"clientDomain\">用户端域名</span>\t","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"user-domain-name","name":"user-domain-name","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-9957762633184366-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-9957762633184366-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-9957762633184366-control-1', parentItemId: 'item-9957762633184366'}\" />"}],"isMustField":false},{"itemId":"item-12010458672895763","itemTitle":"<span data-lang=\"subdomainName\">子域名</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"subdomain-name","name":"subdomain-name","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-12010458672895763-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-12010458672895763-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-12010458672895763-control-1', parentItemId: 'item-12010458672895763'}\" />"}],"isMustField":false},{"itemId":"item-6434354783445038","itemTitle":"<span data-lang=\"SIPcontact\">SIP contact头域地址类型</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-radio","id":"sip-contact","name":"sip-contact","options":[{"text":"<span data-lang=\"lanAddress\">局域网地址</span>","value":"1","selected":"true","isEditing":false},{"text":"<span data-lang=\"wanAddress\">广域网地址</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6434354783445038-control-1","name":"ms-radio-control","title":"单选控件（ms-radio）","content":"<wbr id=\"item-6434354783445038-control-1\" ms-widget=\"{is: 'ms-radio-control', id: 'item-6434354783445038-control-1', parentItemId: 'item-6434354783445038'}\" />"}],"isMustField":false},{"itemId":"item-4629243717612537","itemTitle":"<span data-lang=\"SDPc\">SDP c头域地址类型</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-radio","id":"sdpc","name":"sdpc","options":[{"text":"<span data-lang=\"lanAddress\">局域网地址</span>","value":"1","selected":"true","isEditing":false},{"text":"<span data-lang=\"wanAddress\">广域网地址</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4629243717612537-control-1","name":"ms-radio-control","title":"单选控件（ms-radio）","content":"<wbr id=\"item-4629243717612537-control-1\" ms-widget=\"{is: 'ms-radio-control', id: 'item-4629243717612537-control-1', parentItemId: 'item-4629243717612537'}\" />"}],"isMustField":false},{"itemId":"item-6223699079828309","itemTitle":"<span data-lang=\"backupMode\">备份模式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"backup-mode","name":"backup-mode","options":[{"text":"<span data-lang=\"close\">关闭</span>","value":"0","selected":"true","isEditing":false},{"text":"<span data-lang=\"fixation\">固定</span>","value":"1","selected":"false","isEditing":false},{"text":"DNS SRV","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6223699079828309-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-6223699079828309-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-6223699079828309-control-1', parentItemId: 'item-6223699079828309'}\" />"}],"isMustField":false},{"itemId":"item-4819492341350149","itemTitle":"<span data-lang=\"backupSer\">备份服务器</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"registerOptionRemark3\">例：168.33.134.53:5000</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"backup-server","name":"backup-server","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4819492341350149-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-4819492341350149-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-4819492341350149-control-1', parentItemId: 'item-4819492341350149'}\" />"}],"isMustField":false},{"itemId":"item-6932013126227108","itemTitle":"<span data-lang=\"SRVrefreshInterval\">SRV 刷新间隔</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-custom","id":"refresh-interval","name":"refresh-interval","content":"<input type=\"radio\" name=\"refresh-interval\" id=\"refresh-interval\" value=\"0\" checked/><span data-lang=\"useDNSTimeParameter\">使用 DNS 消息中携带的时间参数（TTL）</span>\n<input type=\"radio\" name=\"refresh-interval\" id=\"refresh-interval\" value=\"1\" style=\"margin-left:50px;\"/><span data-lang=\"custom\">自定义</span>\n<input type=\"text\" name=\"refresh-time\" id=\"refresh-time\" value=\"0\" /><span data-lang=\"second\" name=\"secondWord\">秒</span>","validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6932013126227108-control-2","name":"ms-custom-control","title":"内容自定义控件（ms-custom）","content":"<wbr id=\"item-6932013126227108-control-2\" ms-widget=\"{is: 'ms-custom-control', id: 'item-6932013126227108-control-2', parentItemId: 'item-6932013126227108'}\" />"}],"isMustField":false},{"itemId":"item-27319106066000054","itemTitle":"<span data-lang=\"localPort\">本地端口</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"backup-local-port","name":"backup-local-port","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-27319106066000054-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-27319106066000054-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-27319106066000054-control-1', parentItemId: 'item-27319106066000054'}\" />"}],"isMustField":false},{"itemId":"item-20695625347877034","itemTitle":"<span data-lang=\"serverPort\">服务器端口</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"server-port","name":"server-port","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-20695625347877034-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-20695625347877034-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-20695625347877034-control-1', parentItemId: 'item-20695625347877034'}\" />"}],"isMustField":false},{"itemId":"item-23466928003773524","itemTitle":"<span data-lang=\"retransmission\">超时重传次数</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"retransmission","name":"retransmission","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-23466928003773524-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-23466928003773524-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-23466928003773524-control-1', parentItemId: 'item-23466928003773524'}\" />"}],"isMustField":false},{"itemId":"item-7840648431973771","itemTitle":"<span data-lang=\"cutBack\">主服务器切回间隔</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"second\">秒</span> ，<span data-lang=\"initiateRequest\"> 向主服务器发起注册请求的间隔</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"cutback-interval","name":"cutback-interval","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-7840648431973771-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-7840648431973771-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-7840648431973771-control-1', parentItemId: 'item-7840648431973771'}\" />"}],"isMustField":false},{"itemId":"item-7420539298438693","itemTitle":"<span data-lang=\"sendBeforeSearch\">SRV查询前发送NAPTR查询</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-custom","id":"naptr","name":"naptr","content":"<div class=\"col-xs-3 checkbox-container\" style=\"white-space: nowrap;\"><input type=\"checkbox\" name=\"naptr\" value=\"\" style=\"margin-top: 8px;\"></div>","validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-7420539298438693-control-2","name":"ms-custom-control","title":"内容自定义控件（ms-custom）","content":"<wbr id=\"item-7420539298438693-control-2\" ms-widget=\"{is: 'ms-custom-control', id: 'item-7420539298438693-control-2', parentItemId: 'item-7420539298438693'}\" />"}],"isMustField":false},{"itemId":"item-5004885645412747","itemTitle":"<span data-lang=\"sendingCondition\">SRV记录返回后的A类查询发送条件</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-radio","id":"sending-condition","name":"sending-condition","options":[{"text":"<span data-lang=\"alwaysSend\">始终送</span>","value":"yes","selected":"true","isEditing":false},{"text":"<span data-lang=\"sendOnlyByDomain\">仅当 SRV 返回结果为域名时送</span>","value":"no","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-5004885645412747-control-2","name":"ms-radio-control","title":"单选控件（ms-radio）","content":"<wbr id=\"item-5004885645412747-control-2\" ms-widget=\"{is: 'ms-radio-control', id: 'item-5004885645412747-control-2', parentItemId: 'item-5004885645412747'}\" />"}],"isMustField":false},{"itemId":"item-19102153490351537","itemTitle":"<span data-lang=\"dnsServer\">DNS服务器</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"onlySip\">仅用于解析SIP服务器</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"dns","name":"dns","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-19102153490351537-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-19102153490351537-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-19102153490351537-control-1', parentItemId: 'item-19102153490351537'}\" />"}],"isMustField":false},{"itemId":"item-30077198504423985","itemTitle":" IMS","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"ims","name":"ims","options":[{"text":"<span data-lang=\"open\">开启</span>","value":"yes","selected":"false","isEditing":false},{"text":"<span data-lang=\"close\">关闭</span>","value":"no","selected":"true","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-30077198504423985-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-30077198504423985-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-30077198504423985-control-1', parentItemId: 'item-30077198504423985'}\" />"}],"isMustField":false},{"itemId":"item-04507506360715996","itemTitle":"<span data-lang=\"methodOfGetInfo\">来显信息获取方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"get-mode","name":"get-mode","options":[{"text":"<span data-lang=\"getByP-Asserted\">从 P-Asserted-Identity 头域中获取</span>","value":"on","selected":"true","isEditing":false},{"text":"<span data-lang=\"getByFrom\">从 From 头域中获取 </span>","value":"off","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-04507506360715996-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-04507506360715996-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-04507506360715996-control-1', parentItemId: 'item-04507506360715996'}\" />"}],"isMustField":false},{"itemId":"item-5923029983991182","itemTitle":"<span data-lang=\"infoOfAccessNetwork\">接入网信息</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"access-info","name":"access-info","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-5923029983991182-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-5923029983991182-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-5923029983991182-control-1', parentItemId: 'item-5923029983991182'}\" />"}],"isMustField":false},{"itemId":"item-008096791459548225","itemTitle":"<span data-lang=\"triesLimit\">限制SIP外线并发数</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"concurrency-number","name":"concurrency-number","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-008096791459548225-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-008096791459548225-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-008096791459548225-control-1', parentItemId: 'item-008096791459548225'}\" />"}],"isMustField":false}],"hideCancelButton":false,"script":"//根据选择的不同，相关字段的隐藏以及可见\n$(function () {\n    $('[name=\"backup-server\"], [name=\"refresh-interval\"], [name=\"refresh-time\"], [name=\"backup-local-port\"]').parents(\".form-group\").hide();\n    $('[name=\"server-port\"], [name=\"retransmission\"], [name=\"cutback-interval\"], [name=\"naptr\"]').parents(\".form-group\").hide();\n    $('[name=\"sending-condition\"], [name=\"dns\"]').parents(\".form-group\").hide();\n  \t$('.btn-cancel').hide();\n});\n$(document).on(\"change\", '[name=\"backup-mode\"]', function () {\n    var backupMode = $('[name=\"backup-mode\"]').val();\n    if (backupMode == \"1\") { //固定\n        $('[name=\"backup-server\"]').parents(\".form-group\").show();\n        $('[name=\"backup-local-port\"], [name=\"refresh-interval\"], [name=\"refresh-time\"]').parents(\".form-group\").hide();\n        $('[name=\"server-port\"], [name=\"retransmission\"], [name=\"cutback-interval\"], [name=\"naptr\"]').parents(\".form-group\").hide();\n        $('[name=\"sending-condition\"], [name=\"dns\"]').parents(\".form-group\").hide();\n    } else if (backupMode == \"2\") {  //DNS SRV模式\n        $('[name=\"backup-server\"]').parents(\".form-group\").hide();\n\t\t$('[name=\"refresh-time\"]').hide();\n      $('[name=\"sec\"]').hide();\n        $('[name=\"backup-local-port\"]').parents(\".form-group\").show();\n      \t$('[name=\"refresh-interval\"]').parents(\".form-group\").show();\n        $('[name=\"server-port\"], [name=\"retransmission\"], [name=\"cutback-interval\"], [name=\"naptr\"]').parents(\".form-group\").show();\n        $('[name=\"sending-condition\"]').parents(\".form-group\").show();\n      $('[name=\"secondWord\"]').hide();\n    } else { //关闭\n        $('[name=\"backup-server\"], [name=\"refresh-interval\"], [name=\"refresh-time\"], [name=\"backup-local-port\"]').parents(\".form-group\").hide();\n        $('[name=\"server-port\"], [name=\"retransmission\"], [name=\"cutback-interval\"], [name=\"naptr\"]').parents(\".form-group\").hide();\n        $('[name=\"sending-condition\"], [name=\"dns\"]').parents(\".form-group\").hide();\n    }\n});\n\n$(document).on(\"change\", '[name=\"ims\"]', function () {\n    var ims = $('[name=\"ims\"]').val();\n    if (ims == \"no\") { //关闭\n        $('[name=\"get-mode\"],[name=\"access-info\"]').parents(\".form-group\").hide();\n    } else { //开启\n        $('[name=\"get-mode\"],[name=\"access-info\"]').parents(\".form-group\").show();\n    }\n});\n\n//SRV 刷新间隔：为自定义时 显示隐藏\n$(document).on(\"change\", '[name=\"refresh-interval\"]', function () {\n\tvar refreshInterval=$('input:radio[name=\"refresh-interval\"]:checked').val();\n\tconsole.log(\"refreshInterval\",refreshInterval);\n    if (refreshInterval == \"1\") {\n        $('[name=\"refresh-time\"]').show();\n      $('[name=\"secondWord\"]').show();\n    } else {\n        $('[name=\"refresh-time\"]').hide();\n      $('[name=\"secondWord\"]').hide();\n    }\n\n});\n//获取默认数据\n// 初始化数据\nvar index = $.load($.lang.get(\"loadingMsg1\"));\n//RTP端口范围\nvar minPort;\nvar maxPort;\n$.om.getData(\"gw.config.get\",\n{ id: [478, 476, 479, 477, 325, 1072, 480, 108, 982, 109, 165, 327, 680, 327, 681, 682, 683, 684, 687, 686, 685, 1073, 530, 576, 545, 1155,59,60] },\nfunction (resp) {\n    $.close(index);\n  \t  minPort = resp.data.id59;\n    maxPort = resp.data.id60;\n\t$.form.setValue(\"local-server\", resp.data.id478);\n\twindow.id478 = resp.data.id478;\n    $.form.setValue(\"local-port\", resp.data.id476);\n\twindow.id476 = resp.data.id476;\n    $.form.setValue(\"register-overtime\", resp.data.id479);\n\twindow.id479 = resp.data.id479;\n    $.form.setValue(\"proxy-server\", resp.data.id477);\n\twindow.id477 = resp.data.id477;\n    $.form.setValue(\"increment\", resp.data.id325);\n\twindow.id325 = resp.data.id325;\n    $.form.setValue(\"multiplatform\", resp.data.id1072);\n\twindow.id1072 = resp.data.id1072;\n\t$.form.setValue(\"user-domain-name\", resp.data.id480);\n\twindow.id480 = resp.data.id480;\n    $.form.setValue(\"subdomain-name\", resp.data.id108);\n\twindow.id108 = resp.data.id108;\n    if (resp.data.id982 == \"no\" && resp.data.id109 == \"yes\") {\n        $.form.setValue(\"sip-contact\", 1);\n\t\twindow.sip = 1;\n    } else if (resp.data.id982 == \"yes\" && resp.data.id109 == \"no\") {\n        $.form.setValue(\"sip-contact\", 2);\n\t\twindow.sip = 2;\n    }\n    if (resp.data.id165 == \"no\") {\n        $.form.setValue(\"sdpc\", 1);\n\t\twindow.sdpc = 1;\n    } else if (resp.data.id165 == \"yes\") {\n        $.form.setValue(\"sdpc\", 2);\n\t\twindow.sdpc = 2;\n    }\n\n    if (resp.data.id327 == \"\" && resp.data.id680 == 0) {\n        $.form.setValue(\"backup-mode\", 0);\n\t\twindow.backup = 0;\n        $('[name=\"backup-server\"]').parents(\".form-group\").hide();\n      \t\t$('[name=\"backup-local-port\"], [name=\"refresh-interval\"], [name=\"refresh-time\"]').parents(\".form-group\").hide();\n        $('[name=\"server-port\"], [name=\"retransmission\"], [name=\"cutback-interval\"], [name=\"naptr\"]').parents(\".form-group\").hide();\n    } else if (resp.data.id327 != \"\" && resp.data.id680 == 0) {\n        $.form.setValue(\"backup-mode\", 1);\n\t\twindow.backup = 1;\n        $('[name=\"backup-server\"]').parents(\".form-group\").show();\n      \t$('[name=\"backup-local-port\"], [name=\"refresh-interval\"], [name=\"refresh-time\"]').parents(\".form-group\").hide();\n        $('[name=\"server-port\"], [name=\"retransmission\"], [name=\"cutback-interval\"], [name=\"naptr\"]').parents(\".form-group\").hide();\n    } else if (resp.data.id327 == \"\" && resp.data.id680 == 1) {\n        $.form.setValue(\"backup-mode\", 2);\n\t\twindow.backup = 2;\n      \t\t$('[name=\"backup-server\"]').parents(\".form-group\").hide();\n        $('[name=\"backup-local-port\"], [name=\"refresh-interval\"], [name=\"refresh-time\"]').parents(\".form-group\").show();\n        $('[name=\"server-port\"], [name=\"retransmission\"], [name=\"cutback-interval\"], [name=\"naptr\"]').parents(\".form-group\").show();\n    }\n\n    //IMS开关是yes时,显示否则隐藏\n\twindow.id530 = resp.data.id530;\n    if (resp.data.id530 == \"no\") {\n        $('[name=\"get-mode\"],[name=\"access-info\"]').parents(\".form-group\").hide();\n    } else if (resp.data.id530 == \"yes\") {\n        $('[name=\"get-mode\"],[name=\"access-info\"]').parents(\".form-group\").show();\n    }\n\n\n    $.form.setValue(\"backup-server\", resp.data.id327);\n\twindow.id327 = resp.data.id327;\n\tif(resp.data.id681==\"0\"){//表示选中第一个\n      $(\"input[name='refresh-interval'][value='0']\").attr(\"checked\",true);\n\t\t$('[name=\"refresh-time\"]').hide();\n\t\t$('[name=\"secondWord\"]').hide();\n\t}else if(resp.data.id681!=\"0\"){\n      $(\"input[name='refresh-interval'][value='1']\").attr(\"checked\",true);\n\t\t$('[name=\"refresh-time\"]').show();\n\t\t$('[name=\"secondWord\"]').show();\n\t\t$(\"#refresh-time\").val(resp.data.id681);\n\t}\n\twindow.id681 = resp.data.id681;\n    $.form.setValue(\"backup-local-port\", resp.data.id682);\n\twindow.id682 = resp.data.id682;\n    $.form.setValue(\"server-port\", resp.data.id683);\n\twindow.id683 = resp.data.id683;\n    $.form.setValue(\"retransmission\", resp.data.id684);\n\twindow.id684 = resp.data.id684;\n    $.form.setValue(\"cutback-interval\", resp.data.id687);\n\twindow.id687 = resp.data.id687;\n    $.form.setValue(\"naptr\", resp.data.id686);\n\twindow.id686 = resp.data.id686;\n    $.form.setValue(\"sending-condition\", resp.data.id685);\n\twindow.id685 = resp.data.id685;\n    $.form.setValue(\"dns\", resp.data.id1073);\n\twindow.id1073 = resp.data.id1073;\n    $.form.setValue(\"ims\", resp.data.id530);\n    $.form.setValue(\"get-mode\", resp.data.id576);\n\twindow.id576 = resp.data.id576;\n    $.form.setValue(\"access-info\", resp.data.id545);\n\twindow.id545 = resp.data.id545;\n    $.form.setValue(\"concurrency-number\", resp.data.id1155); \n\twindow.id1155 = resp.data.id1155;\n});\n\n\n// 提交\nform.onSubmit = function (fields) {\n        var localServer = fields[\"local-server\"].value;//默认注册服务器\n        var localPort = fields[\"local-port\"].value;//本地端口\n      \t if(parseInt(localPort) >9999 || parseInt(localPort)<1){\n          $.alert($.lang.get('portAlamInfo1', \"端口范围为1-9999\"));\n            return;\n        }\n        var registerOvertime = fields[\"register-overtime\"].value;//注册超时\n  \t\t\tif(parseInt(registerOvertime) >86400 || parseInt(registerOvertime)<15){\n          $.alert($.lang.get('overtimeInfo', \"注册超时范围为15-86400\"));\n            return;\n        }\n        var proxyServer = fields[\"proxy-server\"].value;//代理服务器\n        var increment = fields[\"increment\"].value;//交换本地端口增量值\n        var multiplatform = fields[\"multiplatform\"].value;//注册多平台\n        var userDomainName = fields[\"user-domain-name\"].value;//用户端域名\n        var subdomainName = fields[\"subdomain-name\"].value;//子域名\n\t\tvar sipContact = $('input:radio[name=\"sip-contact\"]:checked').val();//SIP contact头域地址类型\n\t\tvar sdpc = $('input:radio[name=\"sdpc\"]:checked').val();////SDP c头域地址类型\n        var backupMode = fields[\"backup-mode\"].value;//备份模式\n        var backupServer = fields[\"backup-server\"].value;\n        var ims = fields[\"ims\"].value;//IMS\n        var concurrencyNumber = fields[\"concurrency-number\"].value;//限制SIP外线并发数\n        var refreshInterval=$('input:radio[name=\"refresh-interval\"]:checked').val();\n        var backupLocalPort = fields[\"backup-local-port\"].value;\n        if (backupLocalPort <= parseInt(maxPort) && backupLocalPort >= parseInt(minPort)) {\n            $.alert($.lang.get('portAlamInfo', \"端口不能在RTP范围内\"));\n            return;\n          }\n        var serverPort = fields[\"server-port\"].value;\n        var retransmission = fields[\"retransmission\"].value;\n        var cutbackInterval = fields[\"cutback-interval\"].value;\n        var naptr = $(\"input[name='naptr']\").prop('checked');\n        var sendingCondition = $('input:radio[name=\"sending-condition\"]:checked').val();\n        var dns = fields[\"dns\"].value;\n        var refreshTime = $(\"#refresh-time\").val();\n        var getMode = fields[\"get-mode\"].value;\n        var imsAccessNetworkInfo = fields[\"access-info\"].value;\n\n        if (backupMode == \"1\") {\n            if (backupServer == \"\") {\n                $.alert($.lang.get(\"backupServer\", \"备份服务器不能为空\"));\n                return;\n            }\n        }\n        //开始拼装接口所需数据\n        var reqParamBase = {};\n\t\tif(window.id681!=refreshInterval){\n\t\t\tswitch (refreshInterval) {\n\t\t\t\tcase \"0\":\n\t\t\t\t\treqParamBase.id681 = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"1\":\n\t\t\t\t\tif (refreshTime<=0) {\n\t\t\t\t\t\t$.alert($.lang.get(\"SRVRefreshInterval\", \"自定义SRV刷新间隔需大于0\"));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\treqParamBase.id681 = refreshTime;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n\n\n        //默认注册服务器\n        if (localServer){\n\t\t\tif(window.id478!=localServer){\n\t\t\t\treqParamBase.id478 = localServer;\n\t\t\t}\n\t\t}else{\n\t\t\treqParamBase.id478 = localServer;\n\t\t}\n        if (localPort) {\n\t\t\tif(window.id476!=localPort){\n\t\t\t\treqParamBase.id476 = localPort;//本地端口\n\t\t\t}\n\t\t}\n        if (registerOvertime){\n\t\t\tif(window.id479!=registerOvertime){\n\t\t\t\treqParamBase.id479 = registerOvertime;//注册超时\n\t\t\t}\n\t\t}\n        if (proxyServer) {\n\t\t\tif(window.id477!=proxyServer){\n\t\t\t\treqParamBase.id477 = proxyServer;//代理服务器\n\t\t\t}\n\t\t}else{\n\t\t\treqParamBase.id477 = proxyServer;\n\t\t}\n        if (increment){\n\t\t\tif(window.id325!=increment){\n\t\t\t\treqParamBase.id325 = increment;//交换本地端口增量值\n\t\t\t}\n\t\t}\n        if (multiplatform){\n\t\t\tif(window.id1072!=multiplatform){\n\t\t\t\treqParamBase.id1072 = multiplatform;//多平台\n\t\t\t}\n\t\t}\n        if (userDomainName){\n\t\t\tif(window.id480!=userDomainName){\n\t\t\t\treqParamBase.id480 = userDomainName;//用户端域名\n\t\t\t}\n\t\t}else{\n\t\t\treqParamBase.id480 = userDomainName;\n\t\t}\n        if (subdomainName){\n\t\t\tif(window.id108!=subdomainName){\n\t\t\t\treqParamBase.id108 = subdomainName;//子域名\n\t\t\t}\n\t\t}\n        if (backupLocalPort){\n\t\t\tif(window.id682!=backupLocalPort){\n\t\t\t\treqParamBase.id682 = backupLocalPort;//备份本地端口\n\t\t\t}\n\t\t}\n        if (serverPort){\n\t\t\tif(window.id683!=serverPort){\n\t\t\t\treqParamBase.id683 = serverPort;//服务器端口\n\t\t\t}\n\t\t}\n        if (retransmission){\n\t\t\tif(window.id684!=retransmission){\n\t\t\t\treqParamBase.id684 = retransmission;//超时重传次数\n\t\t\t}\n\t\t}\n        if (cutbackInterval){\n\t\t\tif(window.id687!=cutbackInterval){\n\t\t\t\teqParamBase.id687 = cutbackInterval;//主服务器切回间隔\n\t\t\t}\n\t\t}\n       //SRV查询前发送NAPTR查询\n        if(naptr==false && window.id686!=\"no\"){//未勾选\n          reqParamBase.id686 = \"no\";\n        }else if(naptr==true && window.id686!=\"yes\"){          \n          reqParamBase.id686 = \"yes\";\n        }\n        if (sendingCondition){\n\t\t\tif(window.id685!=sendingCondition){\n\t\t\t\treqParamBase.id685 = sendingCondition;//SRV记录返回后的A类查询发送条件\n\t\t\t}\n\t\t}\n        if (dns){\n\t\t\tif(window.id1073!=dns){\n\t\t\t\treqParamBase.id1073 = dns;//dns\n\t\t\t}\n\t\t}\n        if (ims){\n\t\t\tif(window.id530!=ims){\n\t\t\t\treqParamBase.id530 = ims;//ims\n\t\t\t}\n\t\t}\n        if (getMode){\n\t\t\tif(window.id576!=getMode){\n\t\t\t\treqParamBase.id576 = getMode;//来显获取方式\n\t\t\t}\n\t\t}\n        if (imsAccessNetworkInfo){\n\t\t\tif(window.id545!=imsAccessNetworkInfo){\n\t\t\t\treqParamBase.id545 = imsAccessNetworkInfo;//来显获取方式\n\t\t\t}\n\t\t}\n\n\n\n        //SIP contact头域地址类型\n\t\tif(window.sip!=sipContact){\n\t\t\tswitch (sipContact) {\n\t\t\t\tcase \"1\":  //局域网\n\t\t\t\t\treqParamBase.id982 = \"no\";\n\t\t\t\t\treqParamBase.id109 = \"yes\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"2\":  //广域网\n\t\t\t\t\treqParamBase.id982 = \"yes\";\n\t\t\t\t\treqParamBase.id109 = \"no\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n        //SDP c头域地址类型\n\t\tif(window.sdpc!=sdpc){\n\t\t\tswitch (sdpc) {\n\t\t\t\tcase \"1\":  //局域网\n\t\t\t\t\treqParamBase.id165 = \"no\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"2\":  //广域网\n\t\t\t\t\treqParamBase.id165 = \"yes\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\n        //备份模式\n\t\tif(window.backup!=backupMode){\n\t\t\tswitch (backupMode) {\n\t\t\t\tcase \"0\":  //关闭\n\t\t\t\t\treqParamBase.id327 = \"\";\n\t\t\t\t\treqParamBase.id680 = 0;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"1\":  //固定\n\t\t\t\t\treqParamBase.id327 = backupServer;\n\t\t\t\t\treqParamBase.id680 = \"0\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"2\":  //DNS SRV\n\t\t\t\t\treqParamBase.id327 = \"\";\n\t\t\t\t\treqParamBase.id680 = 1;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\t\t//如果多平台为关闭，需要随线路清空id571和id573的值\n\t\tif(window.id1072!=multiplatform){\n\t\t\treqParamBase.id1072 = multiplatform;\n      \t\tif(multiplatform==\"0\"){\n\t\t\t\t$.om.api.getSIPData(401, function (ipData) {\n\t\t\t\t\tif (!ipData.length) {\n\t\t\t\t\t  return;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar reqParams = [];\n\n\t\t\t\t\tvar tempReqParam = []; \n\t\t\t\t\t$.each(ipData, function (i, data) {\n\t\t\t\t\t  var reqParam = {};\n\n\t\t\t\t\t  //1）清空id401，id432，id591，id1131，id433，id469，id468\n\t\t\t\t\t  //2）将id437，id447设置为off\n\t\t\t\t\t  reqParam.line_id = data.line_id;\n\t\t\t\t\t  $.extend(reqParam, {\n\t\t\t\t\t\tid571: \"\", id573: \"\"\n\t\t\t\t\t  });\n\n\t\t\t\t\t  tempReqParam.push(reqParam);\n\n\t\t\t\t\t  // 当单条请求的批量数到达上限时\n\t\t\t\t\t  if (tempReqParam.length >= MAX_BATCH_ADD_COUNT) {\n\t\t\t\t\t\treqParams.push($.merge([], tempReqParam));\n\t\t\t\t\t\ttempReqParam = [];\n\t\t\t\t\t  }\n\t\t\t\t\t});\n\n\t\t\t\t\t// push未添加的数据\n\t\t\t\t\tif (tempReqParam.length) {\n\t\t\t\t\t  reqParams.push($.merge([], tempReqParam));\n\t\t\t\t\t}\n\t\t\t\t\t// 当前数据index\n\t\t\t\t\tvar deleteIndex = 0;\n\t\t\t\t\tvar deleteData = function () {\n\t\t\t\t\t  $.om.setData(\"gw.config.set\", reqParams[deleteIndex], function (resp) {\n\t\t\t\t\t\tif ($.hasError(resp)) {\n\t\t\t\t\t\t  $.close(loadIndex);\n\n\t\t\t\t\t\t  $.showError(resp);\n\n\t\t\t\t\t\t  return;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tdeleteIndex++;\n\n\t\t\t\t\t\tif (deleteIndex < reqParams.length) {\n\t\t\t\t\t\t  deleteData();\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// 保存完成\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t  $.close(loadIndex);\n\t\t\t\t\t\t}\n\t\t\t\t\t  });\n\t\t\t\t\t};\n\n\t\t\t\t\tdeleteData();\n\t\t\t\t});\n\t\t\t}\n\t\t}\n        if (concurrencyNumber){\n\t\t\tif(window.id1155!=concurrencyNumber){\n\t\t\t\treqParamBase.id1155 = concurrencyNumber;//限制SIP外线并发数\n\t\t\t}\n\t\t}\n        $.confirm($.lang.get(\"registrationOptions\", \"是否提交注册选项\"), function () {\n            var index = $.load($.lang.get(\"saveMsg1\", \"正在保存数据\"));\n            $.om.setData(\"gw.config.set\", reqParamBase, function (data) {\n                $.close(index);\n                $.processResp(data);\n            });\n        });\n};","style":"@charset \"utf-8\";\n/*删除本行在这里写css样式*/\n.control-label{\nwidth: 270px !important;\n}"},
    
    {"templateId":"rorb5","templateName":"新增","category":"SIP外线","items":[{"itemId":"item-9358191696503666","itemTitle":"<span data-lang=\"relayType\">中继类型</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"relay-type","name":"relay-type","options":[{"text":"<span data-lang=\"directConnection\">直连</span>","value":"0","selected":"true","isEditing":false},{"text":"<span data-lang=\"regist\">注册</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"registed\">被注册</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"gw.config.set","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-9358191696503666-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-9358191696503666-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-9358191696503666-control-1', parentItemId: 'item-9358191696503666'}\" />"}],"isMustField":false},{"itemId":"item-822034996593719","itemTitle":"<span data-lang=\"sipServ\">SIP服务器</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"sip-server","name":"sip-server","value":"","reqParam":{"method":"","line_id":"","id":"571"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-822034996593719-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-822034996593719-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-822034996593719-control-1', parentItemId: 'item-822034996593719'}\" />"}],"isMustField":false},{"itemId":"item-6008839967834452","itemTitle":"<span data-lang=\"clientDomain\">用户端域名</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"user-domain-name","name":"user-domain-name","value":"","reqParam":{"method":"","line_id":"","id":"573"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6008839967834452-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-6008839967834452-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-6008839967834452-control-1', parentItemId: 'item-6008839967834452'}\" />"}],"isMustField":false},{"itemId":"item-4112182126457342","itemTitle":"<span data-lang=\"number_1\">号码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"number","name":"number","value":"","reqParam":{"method":"gw.config.set","line_id":"","id":"401"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4112182126457342-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-4112182126457342-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-4112182126457342-control-1', parentItemId: 'item-4112182126457342'}\" />"}],"isMustField":true},{"itemId":"item-4436664957069998","itemTitle":"<span data-lang=\"consumerName\">用户名</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"user-name","name":"user-name","value":"","reqParam":{"method":"gw.config.set","line_id":"","id":"455"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4436664957069998-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-4436664957069998-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-4436664957069998-control-1', parentItemId: 'item-4436664957069998'}\" />"}],"isMustField":false},{"itemId":"item-2659456445174415","itemTitle":"<span data-lang=\"password\">密码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"password","name":"password","value":"","reqParam":{"method":"gw.config.set","line_id":"","id":"432"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-2659456445174415-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-2659456445174415-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-2659456445174415-control-1', parentItemId: 'item-2659456445174415'}\" />"}],"isMustField":false},{"itemId":"item-179687015470819","itemTitle":"<span data-lang=\"concurrentCall\">并发通话数</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"concurrent-call","name":"concurrent-call","value":"","reqParam":{"method":"gw.config.set","line_id":"","id":"654"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-179687015470819-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-179687015470819-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-179687015470819-control-1', parentItemId: 'item-179687015470819'}\" />"}],"isMustField":true},{"itemId":"item-6141688425546876","itemTitle":"<span data-lang=\"accessMode\">接入方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"access-mode","name":"access-mode","options":[{"text":"<span data-lang=\"straightLine\">直线 </span>","value":"on","selected":"false","isEditing":false},{"text":"<span data-lang=\"switchboard\">总机</span>","value":"off","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":"437"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6141688425546876-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-6141688425546876-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-6141688425546876-control-1', parentItemId: 'item-6141688425546876'}\" />"}],"isMustField":false},{"itemId":"item-48132541239922744","itemTitle":"<span data-lang=\"welcomeWord\">欢迎词 </span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"welcome-word","name":"welcome-word","options":[],"reqParam":{"method":"","line_id":"","id":"468"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-48132541239922744-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-48132541239922744-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-48132541239922744-control-1', parentItemId: 'item-48132541239922744'}\" />"}],"isMustField":false},{"itemId":"item-24585817567495427","itemTitle":"<span data-lang=\"lineNumberDID\">直线号码(DID) </span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"line-number","name":"line-number","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-24585817567495427-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-24585817567495427-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-24585817567495427-control-1', parentItemId: 'item-24585817567495427'}\" />"}],"isMustField":false},{"itemId":"item-2197814428258762","itemTitle":"<span data-lang=\"exhale\">呼出</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"exhale","name":"exhale","options":[{"text":"<span data-lang=\"specialForDID\">DID专用</span>","value":"on","selected":"false","isEditing":false},{"text":"<span data-lang=\"share\">共享</span>","value":"off","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":"447"},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-2197814428258762-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-2197814428258762-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-2197814428258762-control-1', parentItemId: 'item-2197814428258762'}\" />"}],"isMustField":false}],"hideCancelButton":false,"script":"var flag = true;\n\n$(function (){\n  var accessMode = $('[name=\"access-mode\"]').val();\n  console.log(\"accessMode\",accessMode);\n  if(accessMode==\"on\"){ //直线\n    $('[name=\"welcome-word\"]').parents(\".form-group\").hide();\n    $('[name=\"line-number\"],[name=\"exhale\"]').parents(\".form-group\").show();\n\t$(\"select[name='exhale'] option[value='on']\").text(\"DID专用\");\n    $(\"select[name='exhale'] option[value='off']\").text(\"共享\");\n   }else if(accessMode==\"off\"){  //总机\n     $('[name=\"welcome-word\"]').parents(\".form-group\").show();\n     $('[name=\"line-number\"]').parents(\".form-group\").hide();\n     $(\"select[name='exhale'] option[value='off']\").text(\"允许\");\n\t $(\"select[name='exhale'] option[value='on']\").text(\"禁止\");\n   }\n  $(document).on(\"keyup\", \"[name='number']\", function () { \n     var value = $(this).val();\n     $(\"[name='user-name']\").val(value);  \n}) \n  var relayType = $('[name=\"relay-type\"]').val();\n  if(relayType==\"0\" || relayType ==\"1\"){ //直连或者注册，SIP服务器、用端端域名显示，欢迎词，直线号码隐藏\n    $('[name=\"sip-server\"], [name=\"user-domain-name\"]').parents(\".form-group\").show();\n   }else if(relayType==\"2\"){  //被注册\n     $('[name=\"sip-server\"], [name=\"user-domain-name\"]').parents(\".form-group\").hide();\n   }\n  \n});\n\n//初始化数据--欢迎词，多平台状态，SIP服务器和用户端域名\n$.om.getData(\"gw.config.get\", {id: [478,480,771,1072]}, function(data) {\n\t//欢迎词\n\tvar welWord = [];\n\tif (data.success) {\n\t\t//欢迎词初始化\n\t\tvar files = data.data.id771.split(\"|\");\n\t\t$.each(files, function (index, file) {\n\t\t  var welFile = file.split(\".\");\n\t\t  if(welFile[0].indexOf(\"welcome\") != -1 || welFile[0].indexOf(\"user\") != -1 ) {\n\t\t\tif(welWord.indexOf(welFile[0])==-1){\n\t\t\t\twelWord.push(welFile[0]);\n\t\t\t\t}\n\t\t  }\n\t\t  console.log(welWord);\n\t\t});\n\t\tfor(var w=0;w<welWord.length;w++){\n\t\t\t$('[name=\"welcome-word\"]').append('<option value=\"' + welWord[w] + '\">' + welWord[w] + '</option>');\n\t\t}\n\t\t//sip服务器和用户端域名初始化\n\t\tif(data.data.id1072 ==0){//未开启多平台时SIP服务器启用全局配置id478，用户端域名用全局配置id480。\n\t\t  flag = false;\n\t\t  if(data.data.id478!=null && data.data.id478!=\"\"){\n\t\t\t $('[name=\"sip-server\"]').val(data.data.id478);\n\t\t\t $('[name=\"sip-server\"]').attr(\"disabled\",\"disabled\");\n\t\t  }else{\n\t\t\t $('[name=\"sip-server\"]').val(\"\");\n\t\t\t $('[name=\"sip-server\"]').attr(\"disabled\",false);\n\t\t  }\n\t\t  if(data.data.id480!=null && data.data.id480!=\"\"){\n\t\t\t $('[name=\"user-domain-name\"]').attr(\"disabled\",\"disabled\");\n\t\t\t\t$('[name=\"user-domain-name\"]').val(data.data.id480);\n\t\t  }else{\n\t\t\t$('[name=\"user-domain-name\"]').attr(\"disabled\",false);\n\t\t\t  $('[name=\"user-domain-name\"]').val(\"\");\n\t\t  }\n\t\t}\n\t}\n});\n//根据注册类型的不同，展示不同的参数\n$(document).on(\"change\", '[name=\"relay-type\"]', function () {\n  var relayType = $('[name=\"relay-type\"]').val();\n  if(relayType==\"0\" || relayType ==\"1\"){ //直连或者注册，SIP服务器、用端端域名显示，欢迎词，直线号码隐藏\n    $('[name=\"sip-server\"], [name=\"user-domain-name\"]').parents(\".form-group\").show();\n    $('[name=\"welcome-word\"], [name=\"line-number\"],[name=\"exhale\"]').parents(\".form-group\").hide();\n   }else if(relayType==\"2\"){  //被注册\n     $('[name=\"sip-server\"], [name=\"user-domain-name\"]').parents(\".form-group\").hide();\n     $('[name=\"welcome-word\"], [name=\"line-number\"],[name=\"exhale\"]').parents(\".form-group\").hide();\n   }\n});\n//根据接入方式的不同，展示不同的参数\n$(document).on(\"change\", '[name=\"access-mode\"]', function () {\n  var accessMode = $('[name=\"access-mode\"]').val();\n  console.log(\"accessMode\",accessMode);\n  if(accessMode==\"on\"){ //直线\n    $('[name=\"welcome-word\"]').parents(\".form-group\").hide();\n     $('[name=\"line-number\"],[name=\"exhale\"]').parents(\".form-group\").show();\n\t $(\"select[name='exhale'] option[value='on']\").text(\"DID专用\");\n     $(\"select[name='exhale'] option[value='off']\").text(\"共享\");\n   }else if(accessMode==\"off\"){  //总机\n     $('[name=\"welcome-word\"]').parents(\".form-group\").show();\n     $('[name=\"line-number\"]').parents(\".form-group\").hide();\n     $(\"select[name='exhale'] option[value='off']\").text(\"允许\");\n\t $(\"select[name='exhale'] option[value='on']\").text(\"禁止\");\n     $(\"select[name='exhale']\").find(\"option[value='off']\").prop(\"selected\", true);\n   }\n});\n\n// 提交\nform.onSubmit = function(fields) {\n  $.confirm( $.lang.get(\"isAddSIP\", \"是否新增SIP外线\"), function() {\n    var relayType = fields[\"relay-type\"].value;\n    var sipServer = fields[\"sip-server\"].value;\n    var userDomainName = fields[\"user-domain-name\"].value;\n    var number = fields[\"number\"].value;\n    if(/[0-9]/g.test(number)==false){\n    \t$.alert($.lang.get(\"phoneOnlyNumber\",\"号码只能为数字\"));\n      return;\n    }\n    var userName = fields[\"user-name\"].value;\n    var password = fields[\"password\"].value;\n    var concurrentCall = fields[\"concurrent-call\"].value;\n    if(/[0-9]/g.test(concurrentCall)==false){\n    \t$.alert($.lang.get(\"concurrentCallOnlyNumber\",\"并发数只能为数字\"));\n      return;\n    }\n    var accessMode = fields[\"access-mode\"].value;\n    var welcomeWord = $(\"select[name='welcome-word']\").val();\n\tconsole.log(\"welcomeWord\",welcomeWord);\n    var lineNumber = fields[\"line-number\"].value;\n    var exhale = fields[\"exhale\"].value;\n    \n    //开始拼装接口所需数据\n    var reqParamBase = {};\n    reqParamBase.import = \"trk\";\n    if(number) reqParamBase.id401 = number;//号码\n    //中继类型\n    switch(relayType){\n      case \"0\"://直连\n        reqParamBase.id433=\"off\";\n        reqParamBase.id1131=\"off\";\n        break;\n      case \"1\"://注册\n        reqParamBase.id433=\"on\";\n        reqParamBase.id1131=\"off\";\n        break;\n      case \"2\"://被注册\n        reqParamBase.id433=\"on\";\n        reqParamBase.id1131=\"on\";\n        break;\n    }\n    if(flag==false){//多平台关闭\n       if(sipServer) {\n        reqParamBase.id478 = sipServer;//sip服务器\n      }\n    \tif(userDomainName){\n          reqParamBase.id480 = userDomainName;//用户端域名\n        }\n    }else{//多平台开启\n      if(sipServer) {\n        reqParamBase.id571 = sipServer;//sip服务器\n      }\n    \tif(userDomainName){\n          reqParamBase.id573 = userDomainName;//用户端域名\n        }\n    }\n    if(userName) reqParamBase.id455 = userName;//用户名\n    //密码\n    if(password){\n      if(password.length>16){\n        $.alert( $.lang.get(\"passwordMaxLength\", \"密码长度不能超过16位\"));\n        return;\n      }else{\n        reqParamBase.id432 = password;\n\t\treqParamBase.id591 = password;\n      }\n    }\n    if(concurrentCall) reqParamBase.id654 = concurrentCall;//并发通话数\n    if(accessMode) reqParamBase.id437 =accessMode;//接入方式\n\tif(accessMode==\"off\"){\n\t\tif(welcomeWord) reqParamBase.id468 = welcomeWord;//欢迎词\n\t}\n    if(lineNumber) {\n      if(/[0-9]/g.test(lineNumber)==false){\n          $.alert($.lang.get(\"didOnlyNumber\",\"直线号码只能为数字\"));\n        \treturn;\n    \t}\n    reqParamBase.id469 = lineNumber;//直线号码did\n    }\n    if(exhale) reqParamBase.id447 = exhale;//呼出\n    \n\tvar continueBatchAdd = function() {\n            //form.reset();\n            var index = $.load(\"正在同步数据...\");\n\t\t\t$.om.api.syncSetting(function() {\n\t\t\t\t$.close(index);\n\t\t\t})\n          };\n\t\n    $.om.setData(\"gw.config.set\", reqParamBase, function(data) {\n\t  var index = $.load($.lang.get(\"loadingMsg2\"));\n      $.open({\n\t\ttitle: \"提示\",\n\t\ticon: 1,\n\t\tcontent: '添加1条成功，请至<a href=\"javascript:;\" class=\"open-ip-ext-tab\">SIP外线</a>查看',\n\t\tsuccess: function(layero, index){\n\t\t  layero.find(\".open-ip-ext-tab\").click(function() {\n\t\t\t$.tab.openTab(\"jh18g\");\n\t\t\t$.close(index);\n\t\t  });\n\t\t},\n\t\tyes: function() {\n\t\t  continueBatchAdd();\n\t\t}\n\t  });\n    });\n    \n  });\n};","style":"@charset \"utf-8\";\n/*删除本行在这里写css样式*/"},

    {"templateId":"ewfm5","templateName":"单个分机配置","category":"IP分机","items":[{"itemId":"item-8635274791873004","itemTitle":"<span data-lang=\"number\">号码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id401","name":"id401","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-8635274791873004-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-8635274791873004-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-8635274791873004-control-1', parentItemId: 'item-8635274791873004'}\" />"}],"isMustField":false},{"itemId":"item-5726657961926924","itemTitle":"<span data-lang=\"department\">部门</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"id653","name":"id653","options":[],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-5726657961926924-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-5726657961926924-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-5726657961926924-control-1', parentItemId: 'item-5726657961926924'}\" />"}],"isMustField":false},{"itemId":"item-2601407232910895","itemTitle":"<span data-lang=\"pinCode\">授权码（PIN码）</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id432","name":"id432","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-2601407232910895-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-2601407232910895-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-2601407232910895-control-1', parentItemId: 'item-2601407232910895'}\" />"}],"isMustField":false},{"itemId":"item-2607669717250536","itemTitle":"<span data-lang=\"stationLock\">分机锁</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-checkbox","id":"id592","name":"id592","options":[{"text":"<span data-lang=\"lock\">锁定</span>","value":"592","selected":"false","isEditing":true}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-2607669717250536-control-1","name":"ms-checkbox-control","title":"多选控件（ms-checkbox）","content":"<wbr id=\"item-2607669717250536-control-1\" ms-widget=\"{is: 'ms-checkbox-control', id: 'item-2607669717250536-control-1', parentItemId: 'item-2607669717250536'}\" />"}],"isMustField":false},{"itemId":"item-7534011426592986","itemTitle":"<span data-lang=\"showName\">显示名称</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id431","name":"id431","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-7534011426592986-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-7534011426592986-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-7534011426592986-control-1', parentItemId: 'item-7534011426592986'}\" />"}],"isMustField":false},{"itemId":"item-5514595774447177","itemTitle":"<span data-lang=\"callJurisdiction\">呼出权限</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"id447-id584","name":"id447-id584","options":[{"text":"<span data-lang=\"disabled\">禁用</span>","value":"4","selected":"false","isEditing":true},{"text":"<span data-lang=\"internalCall\">内线</span>","value":"0","selected":"false","isEditing":true},{"text":"<span data-lang=\"cityCall\">市话</span>","value":"1","selected":"false","isEditing":true},{"text":"<span data-lang=\"domestic\">国内</span>","value":"2","selected":"false","isEditing":true},{"text":"<span data-lang=\"international\">国际</span>","value":"3","selected":"false","isEditing":true}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-5514595774447177-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-5514595774447177-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-5514595774447177-control-1', parentItemId: 'item-5514595774447177'}\" />"}],"isMustField":false},{"itemId":"item-18367838976456596","itemTitle":"<span data-lang=\"mobile\">手机号码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id471","name":"id471","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-18367838976456596-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-18367838976456596-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-18367838976456596-control-1', parentItemId: 'item-18367838976456596'}\" />"}],"isMustField":false},{"itemId":"item-4910203549989427","itemTitle":"<span data-lang=\"call33\">拨*33外呼</span>","alertWinInfo":"<p>选择拨打设备外线号码后加拨*33进入认证流程。</p>\n<p>操作步骤（如需更改默认功能码，请至 <a href=\"javascript:;\" onclick=\"$.tab.openTab('功能码', '/modules/advanced_setting/function_code.html')\">功能码</a> 页面更改）</p>\n<p>1.勾选：拨打设备外线号码，认证后拨打外呼号码</p>\n<p>2.不勾选：拨打设备外线号码*33，认证后拨打外呼号码</p>","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-checkbox","id":"id1053","name":"id1053","options":[{"text":"<span data-lang=\"allow\">允许</span>","value":"1053","selected":"false","isEditing":true}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-4910203549989427-control-1","name":"ms-checkbox-control","title":"多选控件（ms-checkbox）","content":"<wbr id=\"item-4910203549989427-control-1\" ms-widget=\"{is: 'ms-checkbox-control', id: 'item-4910203549989427-control-1', parentItemId: 'item-4910203549989427'}\" />"}],"isMustField":false},{"itemId":"item-02031577483017566","itemTitle":"<span data-lang=\"CRBT\">彩铃</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"id468","name":"id468","options":[],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-02031577483017566-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-02031577483017566-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-02031577483017566-control-1', parentItemId: 'item-02031577483017566'}\" />"}],"isMustField":false},{"itemId":"item-6142302185098858","itemTitle":"<span data-lang=\"callTransfer\">呼叫转移</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"id366-id600","name":"id366-id600","options":[{"text":"<span data-lang=\"colse\">关闭</span>","value":"0","selected":"false","isEditing":true},{"text":"<span data-lang=\"allCallsTransfer\">全部来电转另一话机</span>","value":"1","selected":"false","isEditing":true},{"text":"<span data-lang=\"transferWhenOutServer\">无法接听时转另一话机</span>","value":"2","selected":"false","isEditing":true},{"text":"<span data-lang=\"transferWhenBusy\">遇忙时转另一话机</span>","value":"3","selected":"false","isEditing":true},{"text":"<span data-lang=\"transferWhenNoAnswer\">无应答时转另一话机</span>","value":"4","selected":"false","isEditing":true},{"text":"<span data-lang=\"allCallsTransferVoice\">全部来电转语音留言</span>","value":"5","selected":"false","isEditing":true},{"text":"<span data-lang=\"transferVoiceWhenBusy\">遇忙/无应答时转语音留言</span>","value":"6","selected":"false","isEditing":true}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-6142302185098858-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-6142302185098858-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-6142302185098858-control-1', parentItemId: 'item-6142302185098858'}\" />"}],"isMustField":false},{"itemId":"item-5510271484908147","itemTitle":"<span data-lang=\"transferFor\">转移至号码</span>","alertWinInfo":"<div>填入目标分机或外线号码。其中，分机号码可直接填写，外线号码根据外呼拨号方式的配置不同，包含两种情况：</div>\n<div>1. 在直拨方式下，直接填写外线号码。如 13812345678。</div>\n<div>2. 在加前缀方式下，按”前缀,外线号码”的形式填写，如 9,13812345678。</div>","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id367","name":"id367","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"switch($('[name=\"id366-id600\"]').val()) {\n  case \"1\":\n  case \"2\":\n  case \"3\":\n  case \"4\":\n    if(!$('[name=\"id367\"]').val().length) {\n      return false;\n    }\n  default:\n    return true;\n}","validateMsg":"return $.lang.get(\"ipExtMsg6\");","defaultSelectOption":true}],"rawControls":[{"id":"item-5510271484908147-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-5510271484908147-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-5510271484908147-control-1', parentItemId: 'item-5510271484908147'}\" />"}],"isMustField":false},{"itemId":"item-27818823158244665","itemTitle":"<span data-lang=\"coOscillation\">同振号码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id472","name":"id472","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"var id472 = $.trim($('[name=\"id472\"]').val());\n\nreturn !id472.length ? true : (/^\\d+$/.test(id472) ? true : false);","validateMsg":"return $.lang.get(\"wrongPhoneFormat\");","defaultSelectOption":true}],"rawControls":[{"id":"item-27818823158244665-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-27818823158244665-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-27818823158244665-control-1', parentItemId: 'item-27818823158244665'}\" />"}],"isMustField":false},{"itemId":"item-5592709074054469","itemTitle":"<span data-lang=\"refuseCallNum\">拒接来电号码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id473","name":"id473","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-5592709074054469-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-5592709074054469-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-5592709074054469-control-1', parentItemId: 'item-5592709074054469'}\" />"}],"isMustField":false},{"itemId":"item-309861501863415","itemTitle":"<span data-lang=\"secretaryNum\">秘书分机</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id675","name":"id675","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-309861501863415-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-309861501863415-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-309861501863415-control-1', parentItemId: 'item-309861501863415'}\" />"}],"isMustField":false},{"itemId":"item-6147754776673882","itemTitle":"<span data-lang=\"userIPAddress\">使用IP鉴权时的IP地址</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id571","name":"id571","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-6147754776673882-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-6147754776673882-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-6147754776673882-control-1', parentItemId: 'item-6147754776673882'}\" />"}],"isMustField":false},{"itemId":"item-28372859863997046","itemTitle":"<span data-lang=\"MAC\">IP话机MAC地址</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id894","name":"id894","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-28372859863997046-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-28372859863997046-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-28372859863997046-control-1', parentItemId: 'item-28372859863997046'}\" />"}],"isMustField":false},{"itemId":"item-2607458389124797","itemTitle":"<span data-lang=\"monitor\">监听</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"id192","name":"id192","options":[{"text":"<span data-lang=\"global\">全局</span>","value":"1","selected":"false","isEditing":true},{"text":"<span data-lang=\"onlyGroup\">仅组内</span>","value":"2","selected":"false","isEditing":true},{"text":"<span data-lang=\"colse\">关闭</span>","value":"0","selected":"false","isEditing":true}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-2607458389124797-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-2607458389124797-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-2607458389124797-control-1', parentItemId: 'item-2607458389124797'}\" />"}],"isMustField":false},{"itemId":"item-8250354575335102","itemTitle":"<span data-lang=\"bargeIn\">强插</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"id393","name":"id393","options":[{"text":"<span data-lang=\"global\">全局</span>","value":"1","selected":"false","isEditing":true},{"text":"<span data-lang=\"onlyGroup\">仅组内</span>","value":"2","selected":"false","isEditing":true},{"text":"<span data-lang=\"colse\">关闭</span>","value":"0","selected":"false","isEditing":true}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-8250354575335102-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8250354575335102-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8250354575335102-control-1', parentItemId: 'item-8250354575335102'}\" />"}],"isMustField":false},{"itemId":"item-24167182446702862","itemTitle":"<span data-lang=\"registerPwd\">注册密码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"id591","name":"id591","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-24167182446702862-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-24167182446702862-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-24167182446702862-control-1', parentItemId: 'item-24167182446702862'}\" />"}],"isMustField":false},{"itemId":"item-44991036758478375","itemTitle":"<span data-lang=\"function\">功能</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-checkbox","id":"func","name":"func","options":[{"text":"<span data-lang=\"forbiddenPickup\">禁止被代接</span>","value":"598","selected":"false","isEditing":true},{"text":"<span data-lang=\"waitCall\">呼叫等待</span>","value":"435","selected":"false","isEditing":true},{"text":"<span data-lang=\"prohibitBargeIn\">禁止被强插</span>","value":"394","selected":"false","isEditing":true},{"text":"<span data-lang=\"callHold\">呼叫保持</span>","value":"434","selected":"false","isEditing":true},{"text":"<span data-lang=\"calledSwitch\">被叫转接</span>","value":"861","selected":"false","isEditing":true},{"text":"<span data-lang=\"callingSwitch\">主叫转接</span>","value":"439","selected":"false","isEditing":true},{"text":"<span data-lang=\"extensionMsg\">分机留言订阅</span>","value":"475","selected":"false","isEditing":true},{"text":"<span data-lang=\"noBeMonitored\">禁止被监听</span>","value":"189","selected":"false","isEditing":true},{"text":"<span data-lang=\"callingID\">呼叫等待中来电显示</span>","value":"441","selected":"false","isEditing":true},{"text":"<span data-lang=\"transferOutside\">转接外线</span>","value":"593","selected":"false","isEditing":true},{"text":"<span data-lang=\"callBarring\">呼叫限制</span>","value":"893","selected":"false","isEditing":true},{"text":"<span data-lang=\"callerID\">来电显示</span>","value":"440","selected":"false","isEditing":true},{"text":"<span data-lang=\"Record\">录音</span>","value":"594","selected":"false","isEditing":true}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-44991036758478375-control-1","name":"ms-checkbox-control","title":"多选控件（ms-checkbox）","content":"<wbr id=\"item-44991036758478375-control-1\" ms-widget=\"{is: 'ms-checkbox-control', id: 'item-44991036758478375-control-1', parentItemId: 'item-44991036758478375'}\" />"}],"isMustField":false},{"itemId":"item-31113638980525726","itemTitle":"<span data-lang=\"allowedIPSetting\">允许话机设置</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-checkbox","id":"allowed-setting","name":"allowed-setting","options":[{"text":"<span data-lang=\"realTimeRecording\">即时录音</span>","value":"359","selected":"false","isEditing":true},{"text":"<span data-lang=\"noDisturbing\">免打扰</span>","value":"444","selected":"false","isEditing":true},{"text":"<span data-lang=\"callTransfer\">呼叫转移</span>","value":"436","selected":"false","isEditing":true},{"text":"<span data-lang=\"oscillation\">同振</span>","value":"429","selected":"false","isEditing":true}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-31113638980525726-control-1","name":"ms-checkbox-control","title":"多选控件（ms-checkbox）","content":"<wbr id=\"item-31113638980525726-control-1\" ms-widget=\"{is: 'ms-checkbox-control', id: 'item-31113638980525726-control-1', parentItemId: 'item-31113638980525726'}\" />"}],"isMustField":false},{"itemId":"item-2449855534904697","itemTitle":"","alertWinInfo":"","endOfLineInfo":"","isMore":false,"isMustField":false,"controls":[{"controlType":"ms-custom","id":"","name":"","content":"<a href=\"javascript:;\" onclick=\"$.tab.openTab('qcfpn')\" data-lang=\"viewUseingCode\">查看话机上使用的功能码</a>","validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-2449855534904697-control-1","name":"ms-custom-control","title":"内容自定义控件（ms-custom）","content":"<wbr id=\"item-2449855534904697-control-1\" ms-widget=\"{is: 'ms-custom-control', id: 'item-2449855534904697-control-1', parentItemId: 'item-2449855534904697'}\" />"}]}],"hideCancelButton":false,"script":"var line_id = $.getUrlParam(\"line_id\");\n\nvar departmentParam = [];\nfor (var i = 1; i <= 300; i++) {\n  departmentParam.push({\n    line_id: i,\n    id: 758\n  });\n}\n\nvar index = $.load($.lang.get(\"loadingMsg1\"));\n\n$.om.getDataParallel(\n  // 部门数据\n  [{\n    method: \"gw.config.get\",\n    param: departmentParam\n  }, {\n    method: \"gw.config.get\",\n    param: { id: 771 }\n  },\n  // 分机数据\n  {\n    method: \"gw.config.get\",\n    param: {\n      line_id: line_id,\n      id: [\n        401, 653, 432, 592, 431, 447, 584, 471, 1053, 468, 366,\n        600, 367, 472, 473, 675, 571, 894, 192, 393, 598, 435,\n        394, 434, 861, 439, 475, 189, 441, 593, 893, 440, 594, 359,\n        444, 436, 429, 591\n      ]\n    }\n  }\n  ], function (respData) {\n    $.close(index);\n\n    // 初始化部门数据\n    avalon.vmodels.id653.options.push({ text: \"请选择\", value: \"\", lang: \"pleaseChoose\" });\n    $.each(respData[0].dataArray, function (i, department) {\n      if (!department.id758 ||\n        department.id758 == \"Not Defined\") {\n        return;\n      }\n\n      avalon.vmodels.id653.options.push({\n        text: department.id758,\n        value: department.line_id\n      });\n    });\n\n    // 初始化彩铃数据\n    var rings = respData[1].data.id771.split(\"|\");\n\n    var files = [];\n\n    $.each(rings, function (i, ring) {\n      if (ring.indexOf(\"fring\") != -1) {\n        var r = ring.indexOf(\".\") != -1 ? ring.substring(0, ring.indexOf(\".\")) : ring;\n\n        if (files.indexOf(r) == -1) {\n          files.push(r);\n        }\n      }\n    });\n\n    avalon.vmodels.id468.options.push({ text: \"请选择\", value: \"\", lang: \"pleaseChoose\" });\n    $.each(files, function (index, file) {\n      avalon.vmodels.id468.options.push({\n        text: file,\n        value: file\n      });\n    });\n\n    // 初始化分机数据\n    var data = respData[2].data[\"line_id\" + line_id];\n\n    // 拒绝号码 TODO\n    // 呼出权限\n    var v = \"\";\n    if (data.id447 == \"on\") {\n      v = \"4\"\n    }\n    else if (data.id447 == \"off\") {\n      v = data.id584;\n    }\n    $('[name=\"id447-id584\"]').val(v);\n    avalon.vmodels[\"id447-id584\"].value = v;\n\n    // 呼叫转移\n    var callTransferArr = {\n      \"00\": \"0\", \"10\": \"1\", \"20\": \"2\", \"30\": \"3\",\n      \"40\": \"4\", \"01\": \"5\", \"02\": \"6\"\n    };\n    $('[name=\"id366-id600\"]').val(callTransferArr[data.id366 + data.id600]);\n    avalon.vmodels[\"id366-id600\"].value = callTransferArr[data.id366 + data.id600];\n\n    // 根据呼叫转移的值决定是否显示转移至号码\n    if([\"1\", \"2\", \"3\", \"4\"].indexOf($('[name=\"id366-id600\"]').val()) == -1) {\n      $('[name=\"id367\"]').parents(\".form-group\").hide();\n    }\n\n    // 号码、授权码（PIN）、显示名称、转移至号码、同振号码、\n    // 拒接来电号码、秘书分机、使用IP鉴权时的IP地址、IP话机MAC地址、监听、强插、手机号码、部门、彩铃、注册密码\n    var funcIdArr1 = [401, 432, 431, 367, 472, 473, 675, 571, 894, 192, 393, 471, 653, 468, 591];\n    $.each(funcIdArr1, function (index, funcId) {\n      if (data[\"id\" + funcId]) {\n        $('[name=\"id' + funcId + '\"]').val(data[\"id\" + funcId]);\n        avalon.vmodels[\"id\" + funcId].value = data[\"id\" + funcId];\n      }\n    });\n\n\n    // 手机号码只读\n    if($.auth.getAuth(\"11\") != \"2\") {\n        $('[name=\"id401\"]').replaceWith('<div style=\"line-height: 26px;\">' + data.id401 + '</div>')\n    }\n\n    // // 功能、允许话机设置\n    // 禁止被代接、呼叫等待、禁止被强插、呼叫保持、被叫转接、主叫转接、\n    // 分机留言订阅、禁止被监听、呼叫等待中来电显示、转接外线、呼叫限制、\n    // 来电显示、录音\n    var funcIdArr2 = [\n      // 功能\n      598, 435, 394, 434, 861, 439, 475, 189, 441, 593, 893, 440, 594\n    ]\n    $.each(funcIdArr2, function (i, funcId) {\n      // 861 被叫转接 off的时候表示功能开启\n      if(funcId == 861) {\n        if(data[\"id\" + funcId] == \"off\") {\n          avalon.vmodels[\"func\"].value.push(funcId.toString());\n        }\n      }\n      else if (data[\"id\" + funcId] == \"on\" || data[\"id\" + funcId] == \"1\") {\n        avalon.vmodels[\"func\"].value.push(funcId.toString());\n      }\n    });\n\n    // 分机锁\n    if (data[\"id592\"] == \"1\") {\n      avalon.vmodels[\"id592\"].value.push(\"592\");\n    }\n\n    // 拨*33外呼\n    if (data[\"id1053\"] == \"on\") {\n      avalon.vmodels[\"id1053\"].value.push(\"1053\");\n    }\n\n    var funcIdArr3 = [\n      // 允许话机设置\n      359, 444, 436, 429\n    ];\n    $.each(funcIdArr3, function (i, funcId) {\n      if (data[\"id\" + funcId] == \"on\" || data[\"id\" + funcId] == \"1\") {\n        avalon.vmodels[\"allowed-setting\"].value.push(funcId.toString())\n      }\n    });\n  });\n\nform.onSubmit = function (reqParams) {\n  $.console.log(\"reqParams:\", reqParams);\n\n  var reqParam = {\n    line_id: line_id\n  };\n\n  // 授权码（PIN）、显示名称、转移至号码、缩位拨号组、同振号码、\n  // 拒接来电号码、秘书分机、使用IP鉴权时的IP地址、IP话机MAC地址、监听、强插、手机号码、\n  // 部门、彩铃\n  var funcIdArr1 = [432, 431, 367, 472, 473, 675, 571, 894, 192, 393, 471, 653, 468];\n  // 号码及注册密码根据权限确定是否提交\n  if ($.auth.getAuth(\"11\") == \"2\") {\n    funcIdArr1.push(401);\n    funcIdArr1.push(591);\n  }\n  $.each(funcIdArr1, function (index, funcId) {\n    reqParam[\"id\" + funcId] = reqParams[\"id\" + funcId].value;\n  });\n\n  // // 功能、允许话机设置\n  // 禁止被代接、呼叫等待、禁止被强插、呼叫保持、被叫转接、主叫转接、\n  // 分机留言订阅、禁止被监听、呼叫等待中来电显示、转接外线、呼叫限制、\n  // 来电显示、录音\n  var funcIdArr2 = [\n    // 拨*33外呼\n    1053,\n    // 功能\n    598, 435, 394, 434, 861, 439, 475, 189, 441, 593, 893, 440, 594,\n    // 允许话机设置\n    359, 444, 436, 429\n  ]\n\n  var selectedFunc = [];\n  selectedFunc = selectedFunc.concat(reqParams.func.value);\n  selectedFunc = selectedFunc.concat(reqParams[\"allowed-setting\"].value);\n  selectedFunc = selectedFunc.concat(reqParams[\"id1053\"].value);\n\n  $.console.log(\"selectedFunc:\", selectedFunc);\n\n  $.each(funcIdArr2, function (i, funcId) {\n    // 861 被叫转接 off的时候表示功能开启\n    if(funcId == 861) {\n      reqParam[\"id\" + funcId] = $.grep(selectedFunc, function (fid) { return fid == funcId; }).length ? \"off\" : \"on\";\n    }\n    else {\n      reqParam[\"id\" + funcId] = $.grep(selectedFunc, function (fid) { return fid == funcId; }).length ? \"on\" : \"off\";\n    }\n  });\n\n  // 分机锁\n  if (reqParams.id592.value.length) {\n    reqParam[\"id592\"] = \"1\";\n  }\n  else {\n    reqParam[\"id592\"] = \"0\";\n  }\n\n  // 呼出权限\n  switch (reqParams[\"id447-id584\"].value) {\n    case \"0\":\n      reqParam.id447 = \"off\";\n      reqParam.id584 = \"0\";\n      break;\n    case \"1\":\n      reqParam.id447 = \"off\";\n      reqParam.id584 = \"1\";\n      break;\n    case \"2\":\n      reqParam.id447 = \"off\";\n      reqParam.id584 = \"2\";\n      break;\n    case \"3\":\n      reqParam.id447 = \"off\";\n      reqParam.id584 = \"3\";\n      break;\n    case \"4\":\n      reqParam.id447 = \"on\";\n      break;\n  }\n\n  // 呼叫转移\n  var d = [\n    { id366: \"0\", id600: \"0\" },\n    { id366: \"1\", id600: \"0\" },\n    { id366: \"2\", id600: \"0\" },\n    { id366: \"3\", id600: \"0\" },\n    { id366: \"4\", id600: \"0\" },\n    { id366: \"0\", id600: \"1\" },\n    { id366: \"0\", id600: \"2\" }\n  ];\n\n  if (reqParams[\"id366-id600\"].value !== \"\") {\n    $.extend(reqParam, d[reqParams[\"id366-id600\"].value]);\n  }\n\n  $.console.log(\"reqParam:\", reqParam);\n\n  var index = $.load($.lang.get(\"saveMsg1\"));\n\n  $.om.setData(\"gw.config.set\", reqParam, function (resp) {\n    $.close(index);\n\n    $.processResp(resp, function () {\n      history.back();\n    });\n  });\n};\n\nform.onLoaded = function() {  \n  $('[name=\"id366-id600\"]').change(function() {\n    switch($(this).val()) {\n      case \"1\":\n      case \"2\":\n      case \"3\":\n      case \"4\":\n        $('[name=\"id367\"]').parents(\".form-group\").show();\n        break;\n      default:\n        $('[name=\"id367\"]').parents(\".form-group\").hide();\n        break;\n    }\n  });\n\n  avalon.vmodels[\"func\"].onChange = function(value, changedOption, optionIndex) {\n    // 取消被叫转接时，连带取消主叫转接（与老OM功能保持一致）\n    if(changedOption.value == \"861\" && \n      changedOption.checked == false &&\n      avalon.vmodels[\"func\"].value.indexOf(\"439\") != -1) {\n        avalon.vmodels[\"func\"].value.splice(avalon.vmodels[\"func\"].value.indexOf(\"439\"), 1);\n    }\n\n    // 勾选主叫转接时，连带勾选被叫转接（与老OM功能保持一致）\n    if(changedOption.value == \"439\" && \n      changedOption.checked == true && \n      avalon.vmodels[\"func\"].value.indexOf(\"861\") == -1) {\n        avalon.vmodels[\"func\"].value.push(\"861\");\n    }\n  }\n  \n  // 为密码增加权限控制\n  $('[name=\"id591\"]').parents(\".form-group\").attr(\"data-auth-code\", \"11\");\n};","style":"@charset \"utf-8\";\n/*删除本行在这里写css样式*/"},
    
    {"templateId":"x7hxn","templateName":"<span data-lang=\"ipGlobalSetting\">分机全局设置</span>","category":"IP分机","items":[{"itemId":"item-9700636852806821","itemTitle":"<span data-lang=\"registerPort\">注册端口</span>","alertWinInfo":"","endOfLineInfo":"（<span data-lang=\"range\">范围</span>：1-9999）","isMore":false,"controls":[{"controlType":"ms-input","id":"id491-custom","name":"id491-custom","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"min: 1, max: 9999","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-9700636852806821-control-2","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-9700636852806821-control-2\" ms-widget=\"{is: 'ms-input-control', id: 'item-9700636852806821-control-2', parentItemId: 'item-9700636852806821'}\" />"}],"isMustField":false},{"itemId":"item-7322221240052043","itemTitle":"<span data-lang=\"minTime\">最短注册超时</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"second\">秒</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"id519","name":"id519","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-7322221240052043-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-7322221240052043-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-7322221240052043-control-1', parentItemId: 'item-7322221240052043'}\" />"}],"isMustField":false},{"itemId":"item-41536767198371294","itemTitle":"<span data-lang=\"NATTime\">NAT后最短注册超时</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"second\">秒</span>（<span data-lang=\"range\">范围</span>：30-65535）","isMore":false,"controls":[{"controlType":"ms-input","id":"id520","name":"id520","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"min: 30, max: 65535","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-41536767198371294-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-41536767198371294-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-41536767198371294-control-1', parentItemId: 'item-41536767198371294'}\" />"}],"isMustField":false},{"itemId":"item-6015954833964643","itemTitle":"SBC地址","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"sbcMsg\">用于远程IP分机认证</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"id1381","name":"id1381","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6015954833964643-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-6015954833964643-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-6015954833964643-control-1', parentItemId: 'item-6015954833964643'}\" />"}],"isMustField":false},{"itemId":"item-31671405348169723","itemTitle":"<span data-lang=\"securityDomain\">安全域</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"securityDomainMsg\">用于IP分机注册认证</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"id522","name":"id522","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-31671405348169723-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-31671405348169723-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-31671405348169723-control-1', parentItemId: 'item-31671405348169723'}\" />"}],"isMustField":false},{"itemId":"item-22710280562781215","itemTitle":"<span data-lang=\"illegalRegist\">对非法注册的处理</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-radio","id":"id521","name":"id521","options":[{"text":"<span data-lang=\"illegalRegistOption1\">回403</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"illegalRegistOption2\">不回应</span>","value":"0","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-22710280562781215-control-1","name":"ms-radio-control","title":"单选控件（ms-radio）","content":"<wbr id=\"item-22710280562781215-control-1\" ms-widget=\"{is: 'ms-radio-control', id: 'item-22710280562781215-control-1', parentItemId: 'item-22710280562781215'}\" />"}],"isMustField":false},{"itemId":"item-03292542150089406","itemTitle":"<span data-lang=\"codeVld\">邀请码有效期</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"minute\">分钟</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"id1285","name":"id1285","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-03292542150089406-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-03292542150089406-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-03292542150089406-control-1', parentItemId: 'item-03292542150089406'}\" />"}],"isMustField":false}],"hideCancelButton":false,"script":"// 初始化数据\nvar _nid = $.registSlowLoadNotify();\n\n$.om.getData(\"gw.config.get\", \n{ id: [491, 519, 520, 1381, 522, 521, 1285] }, \nfunction(resp) {\n  \t $.unregistSlowLoadNotify(_nid);\n  \n    // 注册端口\n    // if(resp.data.id491 == 0) {\n    //     $.form.setValue(\"id491\", \"0\");\n    // }\n    // else {\n    //   $.form.setValue(\"id491\", \"1\");\n    //   $.form.setValue(\"id491-custom\", resp.data.id491);\n    // }\n    $.form.setValue(\"id491-custom\", resp.data.id491);\n\n    // 最短注册超时\n    $.form.setValue(\"id519\", resp.data.id519);\n    // NAT后最短注册超时\n    $.form.setValue(\"id520\", resp.data.id520);\n    // SBC地址\n    $.form.setValue(\"id1381\", resp.data.id1381);\n    // 安全域\n    $.form.setValue(\"id522\", resp.data.id522);\n    // 对非法注册的处理\n    $.form.setValue(\"id521\", resp.data.id521);\n    // 邀请码有效期\n    $.form.setValue(\"id1285\", resp.data.id1285);\n});\n\n\n// 删除本行在这里写js代码\nform.onSubmit = function(reqParams) {\n    var data = {};\n  \n    // 注册端口\n    // if($.form.getValue(\"id491\") == \"0\") {\n    //   data.id491 = \"0\";\n    // }\n    // else if($.form.getValue(\"id491\") == \"1\") {\n    //   data.id491 = $.form.getValue(\"id491-custom\");\n    // }\n    data.id491 = $.form.getValue(\"id491-custom\");\n  \n    // 最短注册超时\n    data.id519 = $.form.getValue(\"id519\");\n  \n    // NAT后最短注册超时\n    data.id520 = $.form.getValue(\"id520\");\n  \n    // SBC地址\n    data.id1381 = $.form.getValue(\"id1381\");\n  \n    // 安全域\n    data.id522 = $.form.getValue(\"id522\");\n  \n    // 对非法注册的处理\n    data.id521 = $.form.getValue(\"id521\");\n  \n    // 邀请码有效期\n    data.id1285 = $.form.getValue(\"id1285\");\n\n    var index = $.load($.lang.get(\"saveMsg1\"));\n    $.om.setData(\"gw.config.set\", data, function(resp) {\n      $.close(index);\n      \n      $.processResp(resp);\n    });\n};","style":"@charset \"utf-8\";\n.btn-cancel {\n  display: none;\n}"},
    
	  {"templateId":"av0ca","templateName":"批量添加","category":"SIP外线","items":[{"itemId":"item-8651579300904475","itemTitle":"<span data-lang=\"relayType\">中继类型</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"relay-type","name":"relay-type","options":[{"text":"<span data-lang=\"directConnection\">直连</span>","value":"0","selected":"true","isEditing":false},{"text":"<span data-lang=\"regist\">注册</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"registed\">被注册</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-8651579300904475-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8651579300904475-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8651579300904475-control-1', parentItemId: 'item-8651579300904475'}\" />"}],"isMustField":false},{"itemId":"item-8651543706406581","itemTitle":"<span data-lang=\"startAccount\">起始注册账号</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"start-register","name":"start-register","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-8651543706406581-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-8651543706406581-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-8651543706406581-control-1', parentItemId: 'item-8651543706406581'}\" />"}],"isMustField":true},{"itemId":"item-24505940264017423","itemTitle":"<span data-lang=\"concurrentCall\">并发通话数</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"concurrent-call","name":"concurrent-call","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-24505940264017423-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-24505940264017423-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-24505940264017423-control-1', parentItemId: 'item-24505940264017423'}\" />"}],"isMustField":true},{"itemId":"item-24729257467602683","itemTitle":"<span data-lang=\"batchCount\">批量数</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"mayUse\"> 可使用</span>：<span class=\"remain-telephone\">0</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"batch-quantity","name":"batch-quantity","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"min:1, max: 8000","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-24729257467602683-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-24729257467602683-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-24729257467602683-control-1', parentItemId: 'item-24729257467602683'}\" />"}],"isMustField":true},{"itemId":"item-06507183590861887","itemTitle":"<span data-lang=\"pwdGenerate\">注册密码生成方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"password-gen-type","name":"password-gen-type","options":[{"text":"<span data-lang=\"hasNull\">空</span>","value":"1","selected":"true","isEditing":false},{"text":"<span data-lang=\"useSame\">使用同一密码</span>","value":"2","selected":"false","isEditing":false},{"text":"<span data-lang=\"sameWithOutsideNumber\">与外线号码一致</span>","value":"3","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-06507183590861887-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-06507183590861887-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-06507183590861887-control-1', parentItemId: 'item-06507183590861887'}\" />"}],"isMustField":false},{"itemId":"item-3657349519894424","itemTitle":"<span data-lang=\"password\">密码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"password","name":"password","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-3657349519894424-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-3657349519894424-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-3657349519894424-control-1', parentItemId: 'item-3657349519894424'}\" />"}],"isMustField":false},{"itemId":"item-49508164060219073","itemTitle":"<span data-lang=\"sipServ\">SIP服务器</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"sip-server","name":"sip-server","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-49508164060219073-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-49508164060219073-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-49508164060219073-control-1', parentItemId: 'item-49508164060219073'}\" />"}],"isMustField":false},{"itemId":"item-9687092316184138","itemTitle":"<span data-lang=\"clientDomain\">用户端域名</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"subdomain-name","name":"subdomain-name","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-9687092316184138-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-9687092316184138-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-9687092316184138-control-1', parentItemId: 'item-9687092316184138'}\" />"}],"isMustField":false},{"itemId":"item-34588668017321633","itemTitle":"<span data-lang=\"localPortGenerate\">本地端口生成方式 </span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"port-mode","name":"port-mode","options":[{"text":"<span data-lang=\"useLocalPort\">使用本地端口</span>","value":"1","selected":"true","isEditing":false},{"text":"<span data-lang=\"portAddByOne\">端口逐个加一</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-34588668017321633-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-34588668017321633-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-34588668017321633-control-1', parentItemId: 'item-34588668017321633'}\" />"}],"isMustField":false},{"itemId":"item-4480839669347827","itemTitle":"<span data-lang=\"startPort\">起始端口</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"start-port","name":"start-port","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-4480839669347827-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-4480839669347827-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-4480839669347827-control-1', parentItemId: 'item-4480839669347827'}\" />"}],"isMustField":false},{"itemId":"item-8846511717694836","itemTitle":"<span data-lang=\"accessMode\">接入方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"access-mode","name":"access-mode","options":[{"text":"<span data-lang=\"directConnectionDID\">直线（DID）</span>","value":"on","selected":"false","isEditing":false},{"text":"<span data-lang=\"switchboard\">总机</span>","value":"off","selected":"true","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-8846511717694836-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8846511717694836-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8846511717694836-control-1', parentItemId: 'item-8846511717694836'}\" />"}],"isMustField":false},{"itemId":"item-6992390733613014","itemTitle":"<span data-lang=\"pleaseChoose\">请选择</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-custom","id":"","name":"","content":"<div class=\"row\" id=\"straight-line-1\">\n                                            <label><input type=\"radio\" name=\"num-check\" value=\"1\" checked>  <span data-lang=\"chooseSameExtension\">选择同一分机号</span></label>&nbsp;&nbsp;<input type=\"text\" name=\"same-num\">\n                                    </div>\n                                    <div class=\"row\" id=\"straight-line-2\" style=\"margin-top:2%;\">\n                                           <label><input type=\"radio\" name=\"num-check\" value=\"2\"><span data-lang=\"callerAnsweringGroupNumber\">来电接听组号码</span> </label>&nbsp;&nbsp;<input type=\"text\" name=\"num-group\">\n                                    </div>\n                                    <div class=\"row\" id=\"straight-line-3\" style=\"margin-top:2%;\">\n                                            <label>\n                                                <input type=\"radio\" name=\"num-check\" value=\"3\"><span data-lang=\"sipdescription1\">外线号码后</span>&nbsp;<input type=\"text\" name=\"piece-together-start\" style=\"width:10%;\">\n                                                &nbsp;   <span data-lang=\"sipdescription2\">   位作为DID号码,加前缀 </span> &nbsp;<input type=\"text\" name=\"piece-together-end\" style=\"width:10%;\">&nbsp; <span data-lang=\"sipdescription3\">作为外线的DID号码</span>\n                                            </label>\n                                    </div>","validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-6992390733613014-control-1","name":"ms-custom-control","title":"内容自定义控件（ms-custom）","content":"<wbr id=\"item-6992390733613014-control-1\" ms-widget=\"{is: 'ms-custom-control', id: 'item-6992390733613014-control-1', parentItemId: 'item-6992390733613014'}\" />"}],"isMustField":false},{"itemId":"item-5322837140561201","itemTitle":"<span data-lang=\"welcomeWord\">欢迎词</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"welcome-word","name":"welcome-word","options":[],"reqParam":{"method":"","line_id":"","id":""},"validate":"","validateFunction":"","validateMsg":"","defaultSelectOption":true}],"rawControls":[{"id":"item-5322837140561201-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-5322837140561201-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-5322837140561201-control-1', parentItemId: 'item-5322837140561201'}\" />"}],"isMustField":false}],"hideCancelButton":false,"script":"var flag = true;\n\n//根据选择的不同，相关字段的隐藏以及可见\n$(function(){\n  $('[name=\"password\"], [name=\"start-port\"]').parents(\".form-group\").hide();\n  $(\"#straight-line-1\").parents(\".form-group\").hide();\n});\n\n//密码生成方式\n$(document).on(\"change\", '[name=\"password-gen-type\"]', function () {\n  var passwordGenType = $('[name=\"password-gen-type\"]').val();\n  if(passwordGenType==\"2\"){//使用同一密码\n  \t\t$('[name=\"password\"]').parents(\".form-group\").show();\n  }else{\n  \t\t$('[name=\"password\"]').parents(\".form-group\").hide();\n  }\n});\n\n//本地端口生成方式\n$(document).on(\"change\", '[name=\"port-mode\"]', function () {\n  var portMode = $('[name=\"port-mode\"]').val();\n  if(portMode==\"2\"){//端口逐个加一\n  \t\t$('[name=\"start-port\"]').parents(\".form-group\").show();\n  }else{\n  \t\t$('[name=\"start-port\"]').parents(\".form-group\").hide();\n  }\n});\n\n//接入方式\n$(document).on(\"change\", '[name=\"access-mode\"]', function () {\n  var accessMode = $('[name=\"access-mode\"]').val();\n  if(accessMode==\"on\"){//直线\n  \t\t$(\"#straight-line-1\").parents(\".form-group\").show();\n\t\t$('[name=\"welcome-word\"]').parents(\".form-group\").hide();\n  }else{\n  \t\t$(\"#straight-line-1\").parents(\".form-group\").hide();\n\t\t$('[name=\"welcome-word\"]').parents(\".form-group\").show();\n  }\n});\n\nvar minPort;\nvar maxPort;\n//初始化数据--欢迎词，多平台状态，SIP服务器、用户端域名、RTP端口范围，批量数\n$.om.getData(\"gw.config.get\", {id: [478,480,771,1072,59,60,1372,1371]}, function(data) {\n\t//RTP端口范围\n\tminPort = data.data.id59;\n\tmaxPort = data.data.id60;\n\t// 获取可用的批量数\n\twindow.id1372 = parseInt(data.data.id1372);\n    window.id1371 = parseInt(data.data.id1371);\n    $(\".remain-telephone\").html(window.id1372);\n\t//欢迎词\n\tvar welWord = [];\n\tif (data.success) {\n\t\t//欢迎词初始化\n\t\tvar files = data.data.id771.split(\"|\");\n\t\t$.each(files, function (index, file) {\n\t\t  var welFile = file.split(\".\");\n\t\t  if(welFile[0].indexOf(\"welcome\") != -1 || welFile[0].indexOf(\"user\") != -1 ) {\n\t\t\tif(welWord.indexOf(welFile[0])==-1){\n\t\t\t\twelWord.push(welFile[0]);\n\t\t\t\t}\n\t\t  }\n\t\t  console.log(welWord);\n\t\t});\n\t\tfor(var w=0;w<welWord.length;w++){\n\t\t\t$('[name=\"welcome-word\"]').append('<option value=\"' + welWord[w] + '\">' + welWord[w] + '</option>');\n\t\t}\n\t\t//sip服务器和用户端域名初始化\n\t\tif(data.data.id1072 ==0){//未开启多平台时SIP服务器启用全局配置id478，用户端域名用全局配置id480。\n\t\t  flag = false;\n\t\t  if(data.data.id478!=null && data.data.id478!=\"\"){\n\t\t\t $('[name=\"sip-server\"]').val(data.data.id478);\n\t\t\t $('[name=\"sip-server\"]').attr(\"disabled\",\"disabled\");\n\t\t  }else{\n\t\t\t $('[name=\"sip-server\"]').val(\"\");\n\t\t\t $('[name=\"sip-server\"]').attr(\"disabled\",false);\n\t\t  }\n\t\t  if(data.data.id480!=null && data.data.id480!=\"\"){\n\t\t\t $('[name=\"user-domain-name\"]').attr(\"disabled\",\"disabled\");\n\t\t\t\t$('[name=\"user-domain-name\"]').val(data.data.id480);\n\t\t  }else{\n\t\t\t$('[name=\"user-domain-name\"]').attr(\"disabled\",false);\n\t\t\t  $('[name=\"user-domain-name\"]').val(\"\");\n\t\t  }\n\t\t}\n\t}\n});\n// 提交\nform.onSubmit = function(fields) {\n  $.confirm($.lang.get(\"isBatchAdd\", \"是否确定批量添加\") , function() {\n    var relayType = fields[\"relay-type\"].value;\n    var startRegister = fields[\"start-register\"].value;\n    if(/[0-9]/g.test(startRegister)==false){\n    \t$.alert($.lang.get(\"phoneOnlyNumber\",\"号码只能为数字\"));\n      return;\n    }\n    var batchQuantity = fields[\"batch-quantity\"].value;\n    if(batchQuantity>window.id1372){\n       $.alert( $.lang.get('outOfUseRange', \"超出可使用线路数\"));\n       return;\n    }\n    var passwordGenType = fields[\"password-gen-type\"].value;\n    var password = fields[\"password\"].value;\n    var sipServer = fields[\"sip-server\"].value;\n    var subdomainName = fields[\"subdomain-name\"].value;\n    if(sipServer.indexOf(\"：\")>=0 || sipServer.indexOf(\"．\")>=0 || subdomainName.indexOf(\"：\")>=0 || subdomainName.indexOf(\"．\")>=0){\n       $.alert($.lang.get('serverOrSubdomainNotStandard', \"SIP服务器或者用户端域名的参数不规范\"));\n      return;\n    }\n    var portMode = fields[\"port-mode\"].value;\n    var startPort = fields[\"start-port\"].value;\n    if (startPort <= parseInt(maxPort) && startPort >= parseInt(minPort)) {\n      $.alert($.lang.get('portAlamInfo', \"端口不能在RTP范围内\"));\n      return;\n    }\n    var accessMode = fields[\"access-mode\"].value;\n    var welcomeWord = $(\"select[name='welcome-word']\").val();\n    var concurrentCall = fields[\"concurrent-call\"].value;\n    if(/[0-9]/g.test(concurrentCall)==false){\n    \t$.alert($.lang.get(\"concurrentCallOnlyNumber\",\"并发数只能为数字\"));\n      return;\n    }\n    //开始拼装接口所需数据\n    var reqParamBase = {};\n    //中继类型\n    switch(relayType){\n      case \"0\"://直连\n        reqParamBase.id433=\"off\";\n        reqParamBase.id1131=\"off\";\n        break;\n      case \"1\"://注册\n        reqParamBase.id433=\"on\";\n        reqParamBase.id1131=\"off\";\n        break;\n      case \"2\"://被注册\n        reqParamBase.id433=\"on\";\n        reqParamBase.id1131=\"on\";\n        break;\n    }\n    if (portMode == \"1\") {//本地端口\n        $.om.getData(\"gw.config.get\", {id:476}, function (data) {\n          reqParamBase.id476 = data.data.id476;\n        });\n      }\n    if(accessMode) reqParamBase.id437 = accessMode;//接入方式\n    if(flag==true){//多平台开启\n      if(sipServer) {\n        reqParamBase.id571 = sipServer;//sip服务器\n      }\n      if(subdomainName){\n        reqParamBase.id573 = subdomainName;//用户端域名\n       }\n    }else{\n    \tif(sipServer) {\n        reqParamBase.id478 = sipServer;//sip服务器\n      }\n      if(subdomainName){\n        reqParamBase.id480 = subdomainName;//用户端域名\n       }\n    }\n    if(welcomeWord) reqParamBase.id468 = welcomeWord;//欢迎词\n    if(concurrentCall) reqParamBase.id654 = concurrentCall;//并发数\n    \n\t\tvar reqParams = [];\n    // 起始注册账号就是起始分机号\n    var sipBeginNumber = parseInt(startRegister);\n    // line_id起始号码\n    var lineIdBeginNumber = 8000 + window.id1371 + 1;\n     // 批量生成\n    var tempReqParam = [];\n    // 批量生成\n    for(var i = 0; i < batchQuantity; i++) {\n      var reqParam = {};\n      // 分机号码\n      reqParam.id401 = sipBeginNumber;\n\t  var beginNum = reqParam.id401.toString();\n      sipBeginNumber++;\n\n      //注册密码生成方式\n      switch(passwordGenType){\n        case \"1\": //空\n          break;\n        case \"2\": //使用同一密码\n          reqParamBase.id432= password;\n\t\t  reqParamBase.id591= password;\n          break;\n        case \"3\": //使用分机号\n          reqParamBase.id432 = sipBeginNumber++;\n\t\t  reqParamBase.id591 = sipBeginNumber++;\n          break;\n      }\n      \n      //接入方式为直连的时候\n      if(accessMode==\"on\"){\n        \tvar numCheck = $(\"input[name='num-check']:checked\").val();\n          var sameNum = $(\"input[name='same-num']\").val();\n          var numGgroup = $(\"input[name='num-group']\").val();\n          var pieceTogetherStart = $(\"input[name='piece-together-start']\").val();\n          var pieceTogetherEnd = $(\"input[name='piece-together-end']\").val();\n          var did;\n        if(numCheck==\"1\"){ //表示选中同一号码\n\t\t\tif(/[0-9]/g.test(sameNum)==false){\n\t\t\t\t$.alert($.lang.get(\"didOnlyNumber\",\"直线号码只能为数字\"));\n\t\t\t\t  return;\n\t\t\t}else{\n\t\t\t\tdid = sameNum;\n\t\t\t}\n        } else if (numCheck == \"2\") { //表示选中号码组\n\t\t\tif(/[0-9]/g.test(numGgroup)==false){\n\t\t\t\t$.alert($.lang.get(\"didOnlyNumber\",\"直线号码只能为数字\"));\n\t\t\t\t  return;\n\t\t\t  }else{\n\t\t\t\t  did = numGgroup;\n\t\t\t  }\n        }else{ //表示需要拼装\n\t\t\tif(/[0-9]/g.test(pieceTogetherStart)==false){\n\t\t\t\t$.alert($.lang.get(\"didOnlyNumber\",\"直线号码只能为数字\"));\n\t\t\t\t  return;\n\t\t\t}\n\t\t  if(/[0-9]/g.test(pieceTogetherEnd)==false){\n            $.alert($.lang.get(\"didOnlyNumber\",\"直线号码只能为数字\"));\n              return;\n          }\n\t\tconsole.log(\"beginNum\",typeof beginNum);\n          if (pieceTogetherStart && pieceTogetherEnd) {\n            did = pieceTogetherEnd + beginNum.substring(beginNum.length - pieceTogetherStart, beginNum.length);\n          } else if (pieceTogetherStart) {\n            did = beginNum.substring(beginNum.length - pieceTogetherStart, beginNum.length);\n          }else{\n            $.alert( $.lang.get(\"pleaseEnterRuleOfLineNumber\",  \"请输入直线号码的规则\"));\n            return;\n          }\n        }\n        reqParamBase.id469 = did;\n    }\n      //端口生成方式\n       if (portMode == \"2\"){//逐个加一\n        //如果端口生成方式为逐个加1，那么需要获取起始端口的录入值\n        if (startPort) {\n          reqParam.id583 = startPort++;\n        }\n      }\n      $.extend(true,reqParam, reqParamBase);\n\ttempReqParam.push(reqParam);\n      // 当单条请求的批量数到达上限时\n      if(tempReqParam.length >= MAX_BATCH_ADD_COUNT) {\n        reqParams.push($.merge([], tempReqParam));\n        tempReqParam = [];\n      }\n    }\n    // push未添加的数据\n    if(tempReqParam.length) {\n      reqParams.push($.merge([], tempReqParam));\n    }\n    console.log(\"reparams:+++\"+reqParams);\n\tvar progress = $.progress({ text: $.lang.get(\"savingSIPData\", 0, batchQuantity) });\n    // 已保存数量数量\n    var savedCount = 0;\n    // 当前数据index\n    var saveIndex = 0;\n    var saveData = function() {\n\t\tvar sipParam = saveIndex < reqParams.length - 1 ? \"continue=1&import=trk\" : \"import=trk\";\n\t\t$.om.setData(\"gw.config.set\", reqParams[saveIndex], function(resp) {\n\t\t  savedCount += reqParams[saveIndex].length;\n\t\t   progress.changeText($.lang.get(\"savingSIPData\", savedCount, batchQuantity));\n\t\t   progress.changeProgress(parseInt(savedCount * 100 / batchQuantity));\n\n\t\t\tsaveIndex++;\n\n\t\t\tif(saveIndex < reqParams.length) {\n\t\t\t  saveData();\n\t\t\t}\n\t\t  else {\n\t\t\t  progress.close();\n\t\t\t  // 继续批量操作\n\t\t\t  var continueBatchAdd = function() {\n\t\t\t\t//form.reset();\n\t\t\t\tvar index = $.load(\"正在加载数据...\");\n\t\t\n\t\t\t\t// 获取可用的SIP数数\n\t\t\t\t$.om.getData(\"gw.config.get\", {id: [1371, 1372]}, function(data) {\n\t\t\t\t  $.close(index);\n\t\t\t\t  \n\t\t\t\t  if(data.success) {\n\t\t\t\t\twindow.id1371 = parseInt(data.data.id1371);\n\t\t\t\t\twindow.id1372 = parseInt(data.data.id1372);\n\t\t\t\t\t$(\".remain-telephone\").html(window.id1372);\n\t\t\t\t  }\n\t\t\t\t});\n\t\t\t  };\n\t\t\t  // 批量添加成功\n\t\t\t  var batchAddSuccess = function() {\n\t\t\t\tvar index = $.load($.lang.get(\"loadingMsg2\"));\n\n\t\t\t\t$.om.api.syncSetting(function() {\n\t\t\t\t  $.close(index);\n\n\t\t\t\t  $.open({\n\t\t\t\t\ttitle: \"提示\",\n\t\t\t\t\ticon: 1,\n\t\t\t\t\tcontent: $.lang.get(\"sipAddSuccess\", savedCount),\n\t\t\t\t\tsuccess: function(layero, index){\n\t\t\t\t\t  layero.find(\".open-ip-ext-tab\").click(function() {\n\t\t\t\t\t\t$.tab.openTab(\"jh18g\");\n\t\t\t\t\t\t$.close(index);\n\t\t\t\t\t\tcontinueBatchAdd();\n\t\t\t\t\t  });\n\t\t\t\t\t},\n\t\t\t\t\tyes: function() {\n\t\t\t\t\t  continueBatchAdd();\n\t\t\t\t\t}\n\t\t\t\t  });\n\t\t\t\t});\n\t\t\t  };\n\t\t\t  // 如果有错误\n\t\t\t  if($.om.hasError(resp)) {\n\t\t\t\tvar err = $.om.buildError(resp);\n\n\t\t\t\t// 不是重启错误\n\t\t\t\tif(!err.isRebootError) {\n\t\t\t\t  // 处理错误信息\n\t\t\t\t  $.processResp(resp, function() {\n\t\t\t\t\tcontinueBatchAdd();\n\t\t\t\t  });\n\t\t\t\t}\n\t\t\t\t// 是重启错误，但这个不算做是错误\n\t\t\t\telse {\n\t\t\t\t  batchAddSuccess();\n\t\t\t\t}\n\t\t\t  }\n\t\t\t  else {\n\t\t\t\tbatchAddSuccess();\n\t\t\t  }\n\t\t\t}\n\t\t}, null, sipParam);\n};\nsaveData();\n  });\n};","style":"@charset \"utf-8\";\n/*删除本行在这里写css样式*/\n.btn-cancel{\n\tdisplay:none;\n}"},
	
	  {"templateId":"7cm74","templateName":"第四步：SIP外线","category":"配置向导","items":[{"itemId":"item-8651579300904475","itemTitle":"<span data-lang=\"relayType\">中继类型</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"relay-type","name":"relay-type","options":[{"text":"<span data-lang=\"directConnection\">直连</span>","value":"0","selected":"true","isEditing":false},{"text":"<span data-lang=\"regist\">注册</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"registed\">被注册</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8651579300904475-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8651579300904475-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8651579300904475-control-1', parentItemId: 'item-8651579300904475'}\" />"}],"isMustField":false},{"itemId":"item-8651543706406581","itemTitle":"<span data-lang=\"startAccount\">起始注册账号</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"start-register","name":"start-register","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8651543706406581-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-8651543706406581-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-8651543706406581-control-1', parentItemId: 'item-8651543706406581'}\" />"}],"isMustField":true},{"itemId":"item-24505940264017423","itemTitle":"<span data-lang=\"concurrentCall\">并发通话数</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"concurrent-call","name":"concurrent-call","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-24505940264017423-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-24505940264017423-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-24505940264017423-control-1', parentItemId: 'item-24505940264017423'}\" />"}],"isMustField":true},{"itemId":"item-24729257467602683","itemTitle":"<span data-lang=\"batchCount\">批量数</span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"mayUse\"> 可使用</span>：<span class=\"remain-telephone\">0</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"batch-quantity","name":"batch-quantity","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-24729257467602683-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-24729257467602683-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-24729257467602683-control-1', parentItemId: 'item-24729257467602683'}\" />"}],"isMustField":true},{"itemId":"item-06507183590861887","itemTitle":"<span data-lang=\"pwdGenerate\">注册密码生成方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"password-gen-type","name":"password-gen-type","options":[{"text":"<span data-lang=\"hasNull\">空</span>","value":"1","selected":"true","isEditing":false},{"text":"<span data-lang=\"useSame\">使用同一密码</span>","value":"2","selected":"false","isEditing":false},{"text":"<span data-lang=\"sameWithOutsideNumber\">与外线号码一致</span>","value":"3","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-06507183590861887-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-06507183590861887-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-06507183590861887-control-1', parentItemId: 'item-06507183590861887'}\" />"}],"isMustField":false},{"itemId":"item-3657349519894424","itemTitle":"<span data-lang=\"password\">密码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"password","name":"password","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-3657349519894424-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-3657349519894424-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-3657349519894424-control-1', parentItemId: 'item-3657349519894424'}\" />"}],"isMustField":false},{"itemId":"item-49508164060219073","itemTitle":"<span data-lang=\"sipServ\">SIP服务器</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"sip-server","name":"sip-server","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"return $('[name=\"sip-server\"]').val().indexOf(\"：\") == -1;","validateMsg":"return $.lang.get(\"serverAddressError\", \"服务器地址格式错误\");"}],"rawControls":[{"id":"item-49508164060219073-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-49508164060219073-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-49508164060219073-control-1', parentItemId: 'item-49508164060219073'}\" />"}],"isMustField":false},{"itemId":"item-9687092316184138","itemTitle":"<span data-lang=\"clientDomain\">用户端域名</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"subdomain-name","name":"subdomain-name","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-9687092316184138-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-9687092316184138-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-9687092316184138-control-1', parentItemId: 'item-9687092316184138'}\" />"}],"isMustField":false},{"itemId":"item-34588668017321633","itemTitle":"<span data-lang=\"localPortGenerate\">本地端口生成方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"port-mode","name":"port-mode","options":[{"text":"<span data-lang=\"useLocalPort\">使用本地端口</span>","value":"1","selected":"true","isEditing":false},{"text":"<span data-lang=\"portAddByOne\">端口逐个加一</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-34588668017321633-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-34588668017321633-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-34588668017321633-control-1', parentItemId: 'item-34588668017321633'}\" />"}],"isMustField":false},{"itemId":"item-4480839669347827","itemTitle":"<span data-lang=\"startPort\">起始端口</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"start-port","name":"start-port","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4480839669347827-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-4480839669347827-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-4480839669347827-control-1', parentItemId: 'item-4480839669347827'}\" />"}],"isMustField":false},{"itemId":"item-8846511717694836","itemTitle":"<span data-lang=\"linkedMode\">接入方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"access-mode","name":"access-mode","options":[{"text":"<span data-lang=\"directConnectionDID\">直线（DID）</span>","value":"on","selected":"false","isEditing":false},{"text":"<span data-lang=\"switchboard\">总机</span>","value":"off","selected":"true","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8846511717694836-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8846511717694836-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8846511717694836-control-1', parentItemId: 'item-8846511717694836'}\" />"}],"isMustField":false},{"itemId":"item-6992390733613014","itemTitle":"<span data-lang=\"pleaseChoose\">请选择</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-custom","id":"","name":"","content":"<div class=\"row\" id=\"straight-line-1\">\n                                            <label><input type=\"radio\" name=\"num-check\" value=\"1\">  <span data-lang=\"chooseSameExtension\">选择同一分机号</span></label>&nbsp;&nbsp;<input type=\"text\" name=\"same-num\">\n                                    </div>\n                                    <div class=\"row\" id=\"straight-line-2\" style=\"margin-top:2%;\">\n                                           <label><input type=\"radio\" name=\"num-check\" value=\"2\"><span data-lang=\"callerAnsweringGroupNumber\">来电接听组号码</span> </label>&nbsp;&nbsp;<input type=\"text\" name=\"num-group\">\n                                    </div>\n                                    <div class=\"row\" id=\"straight-line-3\" style=\"margin-top:2%;\">\n                                            <label>\n                                                <input type=\"radio\" name=\"num-check\" value=\"3\"><span data-lang=\"sipdescription1\">外线号码后</span>&nbsp;<input type=\"text\" name=\"piece-together-start\" style=\"width:10%;\">\n                                                &nbsp;   <span data-lang=\"sipdescription2\">   位作为DID号码,加前缀 </span> &nbsp;<input type=\"text\" name=\"piece-together-end\" style=\"width:10%;\">&nbsp; <span data-lang=\"sipdescription3\">作为外线的DID号码</span>\n                                            </label>\n                                    </div>","validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6992390733613014-control-1","name":"ms-custom-control","title":"内容自定义控件（ms-custom）","content":"<wbr id=\"item-6992390733613014-control-1\" ms-widget=\"{is: 'ms-custom-control', id: 'item-6992390733613014-control-1', parentItemId: 'item-6992390733613014'}\" />"}],"isMustField":false},{"itemId":"item-5322837140561201","itemTitle":"<span data-lang=\"welcomeWord\">欢迎词</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"welcome-word","name":"welcome-word","options":[],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-5322837140561201-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-5322837140561201-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-5322837140561201-control-1', parentItemId: 'item-5322837140561201'}\" />"}],"isMustField":false}],"hideCancelButton":false,"script":"var flag = true;\n\n//根据选择的不同，相关字段的隐藏以及可见\nform.onLoaded = function() {\n  $('[name=\"password\"], [name=\"start-port\"]').parents(\".form-group\").hide();\n  $(\"#straight-line-1\").parents(\".form-group\").hide();\n  $(\".btn-ok\").hide();\n  $(\".btn-cancel\").hide();\n}\n\n//获取sip服务器，如果不是多平台注册，则参数不一样\n//先获取多平台注册是否开启\nvar serParam = [];\nvar clientParam = [];\n$.om.getData(\"gw.config.get\", { id: 1072 }, function (data) {\n  if (data.success) {\n    if (data.data.id1072 == 0) {//未开启多平台时SIP服务器启用全局配置id478，用户端域名用全局配置id480。\n      flag = false;\n      $.om.getData(\"gw.config.get\", { id: [478, 480] }, function (data) {\n        if (data.success) {\n          if (data.data.id478 != null && data.data.id478 != \"\") {\n            $('[name=\"sip-server\"]').attr(\"disabled\", \"disabled\");\n            $('[name=\"sip-server\"]').val(data.data.id478);\n            serParam.push(data.data.id478);\n          } else {\n            $('[name=\"sip-server\"]').attr(\"disabled\", false);\n            $('[name=\"sip-server\"]').val(\"\");\n          }\n        }\n      });\n    }\n\n  }\n});\n\n//密码生成方式\n$(document).on(\"change\", '[name=\"password-gen-type\"]', function () {\n  var passwordGenType = $('[name=\"password-gen-type\"]').val();\n  if (passwordGenType == \"2\") {//使用同一密码\n    $('[name=\"password\"]').parents(\".form-group\").show();\n  } else {\n    $('[name=\"password\"]').parents(\".form-group\").hide();\n  }\n});\n\n//本地端口生成方式\n$(document).on(\"change\", '[name=\"port-mode\"]', function () {\n  var portMode = $('[name=\"port-mode\"]').val();\n  if (portMode == \"2\") {//端口逐个加一\n    $('[name=\"start-port\"]').parents(\".form-group\").show();\n  } else {\n    $('[name=\"start-port\"]').parents(\".form-group\").hide();\n  }\n});\n\n//接入方式\n$(document).on(\"change\", '[name=\"access-mode\"]', function () {\n  var accessMode = $('[name=\"access-mode\"]').val();\n  if (accessMode == \"on\") {//直线\n    $(\"#straight-line-1\").parents(\".form-group\").show();\n  } else {\n    $(\"#straight-line-1\").parents(\".form-group\").hide();\n  }\n});\n\n// 获取可用的批量数\n$.om.getData(\"gw.config.get\", { id: [1372, 1371] }, function (data) {\n  if (data.success) {\n    window.id1372 = parseInt(data.data.id1372);\n    window.id1371 = parseInt(data.data.id1371);\n    $(\".remain-telephone\").html(window.id1372);\n  }\n});\n\n// 初始化欢迎词\n$.om.getData(\"gw.config.get\", { id: 771 }, function (data) {\n  var welWord = [];\n  if (data.success) {\n    var files = data.data.id771.split(\"|\");\n    $.each(files, function (index, file) {\n      var welFile = file.split(\".\");\n      if (welFile[0].indexOf(\"welcome\") != -1 || welFile[0].indexOf(\"user\") != -1) {\n        if (welWord.indexOf(welFile[0]) == -1) {\n          welWord.push(welFile[0]);\n        }\n      }\n    });\n    var options = [];\n    for (var w = 0; w < welWord.length; w++) {\n      options.push({\n        text: welWord[w],\n        value: welWord[w]\n      });\n    }\n\n    avalon.vmodels[\"welcome-word\"].options.pushArray(options);\n  }\n});\n\n// 校验数据\nwindow.validateData = function() {\n  return $.validator.validate();\n};\n\n// 提交\nwindow.getData = function () {\n  var fields = avalon.vmodels[\"app\"].getReqParams();\n\n  var relayType = fields[\"relay-type\"].value;\n  var startRegister = fields[\"start-register\"].value;\n  var batchQuantity = fields[\"batch-quantity\"].value;\n  var passwordGenType = fields[\"password-gen-type\"].value;\n  var password = fields[\"password\"].value;\n  var sipServer = fields[\"sip-server\"].value;\n  var subdomainName = fields[\"subdomain-name\"].value;\n  var portMode = fields[\"port-mode\"].value;\n  var startPort = fields[\"start-port\"].value;\n  var accessMode = fields[\"access-mode\"].value;\n  var welcomeWord = fields[\"welcome-word\"].value;\n  var concurrentCall = fields[\"concurrent-call\"].value;\n\n  //开始拼装接口所需数据\n  var reqParamBase = {};\n  //中继类型\n  switch (relayType) {\n    case \"0\"://直连\n      reqParamBase.id433 = \"off\";\n      reqParamBase.id1131 = \"off\";\n      break;\n    case \"1\"://注册\n      reqParamBase.id433 = \"on\";\n      reqParamBase.id1131 = \"off\";\n      break;\n    case \"2\"://被注册\n      reqParamBase.id433 = \"on\";\n      reqParamBase.id1131 = \"on\";\n      break;\n  }\n  if (portMode == \"1\") {//本地端口\n    $.om.getData(\"gw.config.get\", { id: 476 }, function (data) {\n      reqParamBase.id476 = data.data.id476;\n    });\n  }\n  if (accessMode) reqParamBase.id437 = accessMode;//接入方式\n  if (flag = true) {//多平台开启\n    if (sipServer) {\n      reqParamBase.id571 = sipServer;//sip服务器\n    }\n  }\n  if (subdomainName) reqParamBase.id108 = subdomainName;//子域名\n  if (welcomeWord) reqParamBase.id468 = welcomeWord;//欢迎词\n  if (concurrentCall) reqParamBase.id654 = concurrentCall;//并发数\n\n  var reqParams = [];\n  // 起始注册账号就是起始分机号\n  var sipBeginNumber = parseInt(startRegister);\n  // line_id起始号码\n  var lineIdBeginNumber = 8000 + window.id1371 + 1;\n  // 批量生成\n  var tempReqParam = [];\n  // 批量生成\n  for (var i = 0; i < batchQuantity; i++) {\n    var reqParam = {};\n    // 分机号码\n    reqParam.id401 = sipBeginNumber;\n    sipBeginNumber++;\n\n    //注册密码生成方式\n    switch (passwordGenType) {\n      case \"1\": //空\n        break;\n      case \"2\": //使用同一密码\n        reqParamBase.id432 = password;\n        break;\n      case \"3\": //使用分机号\n        reqParamBase.id432 = sipBeginNumber++;\n        break;\n    }\n\n    //接入方式为直连的时候\n    if (accessMode == \"on\") {\n      var numCheck = $(\"input[name='num-check']:checked\").val();\n      var sameNum = $(\"input[name='same-num']\").val();\n      var numGgroup = $(\"input[name='num-group']\").val();\n      var pieceTogetherStart = $(\"input[name='piece-together-start']\").val();\n      var pieceTogetherEnd = $(\"input[name='piece-together-end']\").val();\n      var did;\n      if (numCheck == \"1\") { //表示选中同一号码\n        did = sameNum;\n      } else if (numCheck == \"2\") { //表示选中号码组\n        did = numGgroup;\n      } else { //表示需要拼装\n        if (pieceTogetherStart && pieceTogetherEnd) {\n          did = pieceTogetherEnd + sipBeginNumber.substring(sipBeginNumber.length - pieceTogetherStart, sipBeginNumber.length);\n        } else if (pieceTogetherStart) {\n          did = sipBeginNumber.substring(sipBeginNumber.length - pieceTogetherStart, sipBeginNumber.length);\n        } else {\n          $.alert(  $.lang.get('pleaseEnterRuleOfLineNumber', \"请输入直线号码的规则\")  );\n          return;\n        }\n      }\n      reqParamBase.id469 = did;\n    }\n    //端口生成方式\n    if (portMode == \"2\") {//逐个加一\n      //如果端口生成方式为逐个加1，那么需要获取起始端口的录入值\n      if (startPort) {\n        reqParam.id583 = startPort++;\n      }\n    }\n    $.extend(true, reqParam, reqParamBase);\n    tempReqParam.push(reqParam);\n    // 当单条请求的批量数到达上限时\n    if (tempReqParam.length >= MAX_BATCH_ADD_COUNT) {\n      reqParams.push($.merge([], tempReqParam));\n      tempReqParam = [];\n    }\n  }\n  // push未添加的数据\n  if (tempReqParam.length) {\n    reqParams.push($.merge([], tempReqParam));\n  }\n  $.console.log(\"reparams:+++\" + reqParams);\n\n  return {\n    // 起始注册账号\n    beginTelephone: parseInt(startRegister),\n    // 结束分机号\n    endTelephone: parseInt(startRegister) + parseInt(batchQuantity) - 1,\n    batchQuantity: batchQuantity,\n    // 请求参数\n    reqParams: reqParams,\n    // 多平台参数\n    id478: serParam.join(\",\")\n  };\n};","style":"@charset \"utf-8\";\n/*删除本行在这里写css样式*/"},

 
     {"templateId":"a0233","templateName":"第三步：IP分机","category":"配置向导","items":[{"itemId":"item-4976706096766712","itemTitle":" <span data-lang=\"startNum\">起始分机号码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"begin-telephone","name":"begin-telephone","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-4976706096766712-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-4976706096766712-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-4976706096766712-control-1', parentItemId: 'item-4976706096766712'}\" />"}],"isMustField":true},{"itemId":"item-7053436167187475","itemTitle":" <span data-lang=\"dodGenerate\">DOD生成方式</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"dod-gen-type","name":"dod-gen-type","options":[{"text":"<span data-lang=\"useSameNumber\">使用同一号码</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"addOne\">逐个加一</span>","value":"1","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-7053436167187475-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-7053436167187475-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-7053436167187475-control-1', parentItemId: 'item-7053436167187475'}\" />"}],"isMustField":false},{"itemId":"item-07917181063134815","itemTitle":"<span data-lang=\"startLong\">起始长号 </span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"begin-long-number","name":"begin-long-number","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-07917181063134815-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-07917181063134815-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-07917181063134815-control-1', parentItemId: 'item-07917181063134815'}\" />"}],"isMustField":false},{"itemId":"item-0231821045308227","itemTitle":"<span data-lang=\"batchCount\">批量数 </span>","alertWinInfo":"","endOfLineInfo":"<span data-lang=\"mayUse\"> 可使用</span>：<span class=\"remain-telephone\">0</span>","isMore":false,"controls":[{"controlType":"ms-input","id":"batch-quantity","name":"batch-quantity","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"var batchQuantity = $.plugins.getValue(\"batch-quantity\");\nreturn /\\d+/.test(batchQuantity) && parseInt(batchQuantity) > 0 && parseInt(batchQuantity) <= window.id1370;","validateMsg":"return window.id1370 == 0 ? \"无可用线路\"  : \"批量数范围为1~\" + window.id1370;"}],"rawControls":[{"id":"item-0231821045308227-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-0231821045308227-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-0231821045308227-control-1', parentItemId: 'item-0231821045308227'}\" />"}],"isMustField":true},{"itemId":"item-6548770936007966","itemTitle":"<span data-lang=\"pwdGenerate\">注册密码生成方式 </span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-radio","id":"password-gen-type","name":"password-gen-type","options":[{"text":"<span data-lang=\"random\">随机生成</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"useSame\">使用同一密码</span>","value":"1","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6548770936007966-control-1","name":"ms-radio-control","title":"单选控件（ms-radio）","content":"<wbr id=\"item-6548770936007966-control-1\" ms-widget=\"{is: 'ms-radio-control', id: 'item-6548770936007966-control-1', parentItemId: 'item-6548770936007966'}\" />"}],"isMustField":false},{"itemId":"item-8703341609195874","itemTitle":"<span data-lang=\"pwdLength\">密码长度</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"password-length","name":"password-length","options":[{"text":"6","value":"6","selected":"false","isEditing":false},{"text":"7","value":"7","selected":"false","isEditing":false},{"text":"8","value":"8","selected":"false","isEditing":false},{"text":"9","value":"9","selected":"false","isEditing":false},{"text":"10","value":"10","selected":"false","isEditing":false},{"text":"11","value":"11","selected":"false","isEditing":false},{"text":"12","value":"12","selected":"false","isEditing":false},{"text":"13","value":"13","selected":"false","isEditing":false},{"text":"14","value":"14","selected":"false","isEditing":false},{"text":"15","value":"15","selected":"false","isEditing":false},{"text":"16","value":"16","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8703341609195874-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8703341609195874-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8703341609195874-control-1', parentItemId: 'item-8703341609195874'}\" />"}],"isMustField":false},{"itemId":"item-9137883721078104","itemTitle":"<span data-lang=\"pwdForm\">密码组成</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"password-consist","name":"password-consist","options":[{"text":"<span data-lang=\"number2\">数字</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"alphabetAndNumber\">字母+数字</span>","value":"1","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-9137883721078104-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-9137883721078104-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-9137883721078104-control-1', parentItemId: 'item-9137883721078104'}\" />"}],"isMustField":false},{"itemId":"item-36291608872446357","itemTitle":"<span data-lang=\"password\">密码</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"password","name":"password","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-36291608872446357-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-36291608872446357-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-36291608872446357-control-1', parentItemId: 'item-36291608872446357'}\" />"}],"isMustField":false},{"itemId":"item-06684900197240529","itemTitle":"<span data-lang=\"userIPAddress\">使用IP鉴权时的IP地址</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-input","id":"ip-address","name":"ip-address","value":"","reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-06684900197240529-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-06684900197240529-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-06684900197240529-control-1', parentItemId: 'item-06684900197240529'}\" />"}],"isMustField":false},{"itemId":"item-17220589340534254","itemTitle":"<span data-lang=\"callJurisdiction\">呼出权限</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"auth","name":"auth","options":[{"text":"<span data-lang=\"disabled\">禁用</span>","value":"4","selected":"false","isEditing":true},{"text":"<span data-lang=\"internalCall\">内线</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"cityCall\">市话</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"domestic\">国内</span>","value":"2","selected":"false","isEditing":false},{"text":"<span data-lang=\"international\">国际</span>","value":"3","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-17220589340534254-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-17220589340534254-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-17220589340534254-control-1', parentItemId: 'item-17220589340534254'}\" />"}],"isMustField":false},{"itemId":"item-11332141651018057","itemTitle":"<span data-lang=\"department\">部门</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"org","name":"org","options":[],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-11332141651018057-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-11332141651018057-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-11332141651018057-control-1', parentItemId: 'item-11332141651018057'}\" />"}],"isMustField":false},{"itemId":"item-8118997032189554","itemTitle":"<span data-lang=\"CRBT\">彩铃</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"ring","name":"ring","options":[],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8118997032189554-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8118997032189554-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8118997032189554-control-1', parentItemId: 'item-8118997032189554'}\" />"}],"isMustField":false},{"itemId":"item-663287731113529","itemTitle":"<span data-lang=\"open\">开启</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-checkbox","id":"open","name":"open","options":[{"text":"<span data-lang=\"useExtension\">启用分机</span>","value":"457","selected":"false","isEditing":false},{"text":"<span data-lang=\"callerID\">来电显示</span>","value":"440","selected":"false","isEditing":false},{"text":"<span data-lang=\"Record\">录音</span>","value":"594","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-663287731113529-control-1","name":"ms-checkbox-control","title":"多选控件（ms-checkbox）","content":"<wbr id=\"item-663287731113529-control-1\" ms-widget=\"{is: 'ms-checkbox-control', id: 'item-663287731113529-control-1', parentItemId: 'item-663287731113529'}\" />"}],"isMustField":false},{"itemId":"item-20208361441785772","itemTitle":"<span data-lang=\"callTransfer\">呼叫转移</span>","alertWinInfo":"","endOfLineInfo":"","isMore":false,"controls":[{"controlType":"ms-select","id":"call-transfer","name":"call-transfer","options":[{"text":"<span data-lang=\"close\">关闭</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"allCallsTransfer\">全部来电转另一话机</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferWhenOutServer\">无法接听时转另一话机</span>","value":"2","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferWhenBusy\">遇忙时转另一话机</span>","value":"3","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferWhenNoAnswer\">无应答时转另一话机</span>","value":"4","selected":"false","isEditing":false},{"text":"<span data-lang=\"allCallsTransferVoice\">全部来电转语音留言</span>","value":"5","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferVoiceWhenBusy\">遇忙/无应答时转语音留言</span>","value":"6","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-20208361441785772-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-20208361441785772-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-20208361441785772-control-1', parentItemId: 'item-20208361441785772'}\" />"}],"isMustField":false},{"itemId":"item-1695568695787728","itemTitle":"转移至号码","alertWinInfo":"<div>填入目标分机或外线号码。其中，分机号码可直接填写，外线号码根据外呼拨号方式的配置不同，包含两种情况：</div>\n<div>1. 在直拨方式下，直接填写外线号码。如 13812345678。</div>\n<div>2. 在加前缀方式下，按”前缀,外线号码”的形式填写，如 9,13812345678。</div>","endOfLineInfo":"","isMore":false,"isMustField":false,"validateMsg":"","controls":[{"controlType":"ms-input","id":"id367","name":"id367","value":"","validate":"","validateFunction":"switch($('[name=\"call-transfer\"]').val()) {\n  case \"1\":\n  case \"2\":\n  case \"3\":\n  case \"4\":\n    if(!$('[name=\"id367\"]').val().length) {\n      return false;\n    }\n  default:\n    return true;\n}","reqParam":{"method":"","line_id":"","id":""},"validateMsg":"return \"请输入转移号码\"","defaultSelectOption":true}],"rawControls":[{"id":"item-1695568695787728-control-1","name":"ms-input-control","title":"文本输入控件（ms-input）","content":"<wbr id=\"item-1695568695787728-control-1\" ms-widget=\"{is: 'ms-input-control', id: 'item-1695568695787728-control-1', parentItemId: 'item-1695568695787728'}\" />"}]},{"itemId":"item-9113870265564015","itemTitle":"<span data-lang=\"monitor\">监听</span>","alertWinInfo":"","endOfLineInfo":"","isMore":true,"controls":[{"controlType":"ms-select","id":"monitoring","name":"monitoring","options":[{"text":"<span data-lang=\"close\">关闭</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"global\">全局</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"onlyGroup\">仅组内</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-9113870265564015-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-9113870265564015-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-9113870265564015-control-1', parentItemId: 'item-9113870265564015'}\" />"}],"isMustField":false},{"itemId":"item-8919344038618715","itemTitle":"<span data-lang=\"override\">强插</span>","alertWinInfo":"","endOfLineInfo":"","isMore":true,"controls":[{"controlType":"ms-select","id":"force-insert","name":"force-insert","options":[{"text":"<span data-lang=\"colse\">关闭</span>","value":"0","selected":"false","isEditing":false},{"text":"<span data-lang=\"global\">全局</span>","value":"1","selected":"false","isEditing":false},{"text":"<span data-lang=\"onlyGroup\">仅组内</span>","value":"2","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-8919344038618715-control-1","name":"ms-select-control","title":"下拉选择控件（ms-select）","content":"<wbr id=\"item-8919344038618715-control-1\" ms-widget=\"{is: 'ms-select-control', id: 'item-8919344038618715-control-1', parentItemId: 'item-8919344038618715'}\" />"}],"isMustField":false},{"itemId":"item-6912623308544887","itemTitle":"<span data-lang=\"function\">功能</span>","alertWinInfo":"","endOfLineInfo":"","isMore":true,"controls":[{"controlType":"ms-checkbox","id":"func","name":"func","options":[{"text":"<span data-lang=\"prohibitionSub\">禁止被代接</span>","value":"598","selected":"false","isEditing":false},{"text":"<span data-lang=\"callWaiting\">呼叫等待</span>","value":"435","selected":"false","isEditing":false},{"text":"<span data-lang=\"call33\">拨*33外呼</span>","value":"1053","selected":"false","isEditing":false},{"text":"<span data-lang=\"callHold\">呼叫保持</span>","value":"434","selected":"false","isEditing":false},{"text":"<span data-lang=\"calledSwitch\">被叫转接</span>","value":"861","selected":"false","isEditing":false},{"text":"<span data-lang=\"callingSwitch\">主叫转接</span>","value":"439","selected":"false","isEditing":false},{"text":"<span data-lang=\"extensionMsg\">分机留言订阅</span>","value":"475","selected":"false","isEditing":false},{"text":"<span data-lang=\"noBeMonitored\">禁止被监听</span>","value":"189","selected":"false","isEditing":false},{"text":"<span data-lang=\"callingID\">呼叫等待中来电显示</span>","value":"441","selected":"false","isEditing":false},{"text":"<span data-lang=\"transferOutside\">转接外线</span>","value":"593","selected":"false","isEditing":false},{"text":"<span data-lang=\"callBarring\">呼叫限制</span>","value":"893","selected":"false","isEditing":false},{"text":"<span data-lang=\"prohibitBargeIn\">禁止被强插</span>","value":"394","selected":"false","isEditing":false},{"text":"<span data-lang=\"realTimeRecording\">即时录音</span>","value":"359","selected":"false","isEditing":false},{"text":"<span data-lang=\"extensionLock\">分机锁</span>","value":"592","selected":"false","isEditing":false},{"text":"<span data-lang=\"callTransfer\">呼叫转移</span>","value":"436","selected":"false","isEditing":false},{"text":"<span data-lang=\"allowNotDisturb\">允许话机设置免打扰</span>","value":"444","selected":"false","isEditing":false}],"reqParam":{"method":"","line_id":"","id":""},"validate":"","defaultSelectOption":true,"validateFunction":"","validateMsg":""}],"rawControls":[{"id":"item-6912623308544887-control-1","name":"ms-checkbox-control","title":"多选控件（ms-checkbox）","content":"<wbr id=\"item-6912623308544887-control-1\" ms-widget=\"{is: 'ms-checkbox-control', id: 'item-6912623308544887-control-1', parentItemId: 'item-6912623308544887'}\" />"}],"isMustField":false}],"hideCancelButton":false,"script":"// 初始化部门\nvar index = $.load($.lang.get(\"loadingMsg1\", \"正在加载数据...\") );\n\n$.om.api.getDepartments(function(departments) {\n  var orgOptions = [];\n\n  orgOptions.push({ text: \"请选择\", value: \"\" })\n  $.each(departments, function(i, department) {\n    orgOptions.push({\n      value: department.line_id,\n      text: department.id758\n    });\n  });\n\n  avalon.vmodels.org.options.pushArray(orgOptions);\n\n  // 初始化彩铃及可用的分机数\n  $.om.getDataParallel(\n    [\n      {method: \"gw.config.get\", param: {id: 771}},\n      {method: \"gw.config.get\", param: {id: [1369, 1370]}}\n    ], function(resp) {\n      $.close(index);\n\n      var rings = resp[0].data.id771.split(\"|\");\n      \n      var files = [];\n\n      $.each(rings, function(i, ring) {\n        if(ring.indexOf(\"fring\") != -1) {\n            var r = ring.indexOf(\".\") != -1 ? ring.substring(0, ring.indexOf(\".\")) : ring;\n            \n            if(files.indexOf(r) == -1) {\n                files.push(r);\n            }\n        }\n      });\n\n      var fileOptions = [];\n      fileOptions.push({ text: \"请选择\", value: \"\" });\n\n      $.each(files, function(index, file) {\n        fileOptions.push({\n          value: file,\n          text: file\n        });\n      });\n\n      avalon.vmodels.ring.options.pushArray(fileOptions);\n      \n      window.id1369 = parseInt(resp[1].data.id1369);\n      window.id1370 = parseInt(resp[1].data.id1370);\n      $(\".remain-telephone\").html(window.id1370);\n  });\n});\n\n// 校验数据\nwindow.validateData = function() {\n  return $.validator.validate();\n};\n\n// 获取请求的数据\nwindow.getData = function() {\n  var fields = avalon.vmodels[\"app\"].getReqParams();\n\n  var auth = fields[\"auth\"].value;\n  var batchQuantity = fields[\"batch-quantity\"].value;\n  var beginLongNumber = fields[\"begin-long-number\"].value;\n  var beginTelephone = fields[\"begin-telephone\"].value;\n  var callTransfer = fields[\"call-transfer\"].value;\n  var dodGenType = fields[\"dod-gen-type\"].value;\n  var forceInsert = fields[\"force-insert\"].value;\n  var func = fields[\"func\"].value;\n  var ipAddress = fields[\"ip-address\"].value;\n  var monitoring = fields[\"monitoring\"].value;\n  var openFunc = fields[\"open\"].value;\n  var org = fields[\"org\"].value;\n  var password = fields[\"password\"].value;\n  var passwordConsist = fields[\"password-consist\"].value;\n  var passwordGenType = fields[\"password-gen-type\"].value;\n  var passwordLength = fields[\"password-length\"].value;\n  var ring = fields[\"ring\"].value;\n\n  // 生成随机密码\n  var randomPass = function(type, length) {\n    var nums = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\"];\n    var alphas = [\"0\", \"1\", \"2\", \"3\", \"4\", \"5\", \"6\", \"7\", \"8\", \"9\",\n                  \"a\", \"b\", \"c\", \"d\", \"e\", \"f\", \"g\", \"h\", \"i\", \"j\", \n                  \"k\", \"l\", \"m\", \"n\", \"o\", \"p\", \"q\", \"r\", \"s\", \"t\", \n                  \"u\", \"v\", \"w\", \"x\", \"y\", \"z\"];\n\n    var pass = \"\";\n\n    for(var i = 0; i < length; i++) {\n      pass += type == \"0\" ? nums[Math.floor(Math.random() * nums.length)] : \n      alphas[Math.floor(Math.random() * alphas.length)]\n    }\n\n    return pass;\n  };\n\n  var reqParamBase = {};\n  // 使用IP鉴权时的IP地址\n  if(ipAddress != \"\") {\n    reqParamBase.id571 = ipAddress;\n  }\n  // 权限\n  switch(auth) {\n    case \"0\":\n      reqParamBase.id447 = \"off\";\n      reqParamBase.id584 = \"0\";\n      break;\n    case \"1\":\n      reqParamBase.id447 = \"off\";\n      reqParamBase.id584 = \"1\";\n      break;\n    case \"2\":\n      reqParamBase.id447 = \"off\";\n      reqParamBase.id584 = \"2\";\n      break;\n    case \"3\":\n      reqParamBase.id447 = \"off\";\n      reqParamBase.id584 = \"3\";\n      break;\n    case \"4\":\n      reqParamBase.id447 = \"on\";\n      break;\n  }\n\n  // 部门\n  if(org != \"\" && !$.isUndefined(org)) {\n    reqParamBase.id653 = org;\n  }\n  // 彩铃\n  if(ring != \"\") {\n    reqParamBase.id468 = ring;\n  }\n  // 启用分机\n  if(openFunc.indexOf(\"457\") != -1) { reqParamBase.id457 = \"off\"; }\n  // 来显\n  if(openFunc.indexOf(\"440\") != -1) { reqParamBase.id440 = \"on\"; }\n  // 录音\n  if(openFunc.indexOf(\"594\") != -1) { reqParamBase.id594 = \"on\"; }\n\n  // 呼叫转移\n  switch(callTransfer) {\n    case \"0\":\n      reqParamBase.id366 = 0;\n      reqParamBase.id600 = 0;\n      break;\n    case \"1\":\n      reqParamBase.id366 = 1;\n      reqParamBase.id600 = 0;\n      break;\n    case \"2\":\n      reqParamBase.id366 = 2;\n      reqParamBase.id600 = 0;\n      break;\n    case \"3\":\n      reqParamBase.id366 = 3;\n      reqParamBase.id600 = 0;\n      break;\n    case \"4\":\n      reqParamBase.id366 = 4;\n      reqParamBase.id600 = 0;\n      break;\n    case \"5\":\n      reqParamBase.id366 = 0;\n      reqParamBase.id600 = 1;\n      break;\n    case \"6\":\n      reqParamBase.id366 = 0;\n      reqParamBase.id600 = 2;\n      break;\n    }\n\n    if(callTransfer == \"1\" ||\n      callTransfer == \"2\" ||\n      callTransfer == \"3\" ||\n      callTransfer == \"4\") {\n      reqParamBase.id367 = fields[\"id367\"].value;\n    }\n\n  // 监听\n  if(monitoring != \"\") {\n    reqParamBase.id192 = monitoring;\n  }\n\n  // 强插\n  if(forceInsert != \"\") {\n    reqParamBase.id393 = forceInsert;\n  }\n\n  // 禁止被代接\n  if(func.indexOf(\"598\") != -1) {\n    reqParamBase.id598 = \"on\";\n  }\n  // 呼叫等待\n  if(func.indexOf(\"435\") != -1) { reqParamBase.id435 = \"on\"; }\n  // 拨*33外呼\n  if(func.indexOf(\"1053\") != -1) { reqParamBase.id1053 = \"on\"; }\n  // 呼叫保持\n  if(func.indexOf(\"434\") != -1) { reqParamBase.id434 = \"on\"; }\n  // 被叫转接\n  if(func.indexOf(\"861\") != -1) { reqParamBase.id861 = \"on\"; }\n  // 主叫转接\n  if(func.indexOf(\"439\") != -1) { reqParamBase.id439 = \"on\"; }\n  // 分机留言订阅\n  if(func.indexOf(\"475\") != -1) { reqParamBase.id475 = \"on\"; }\n  // 禁止被监听\n  if(func.indexOf(\"189\") != -1) { reqParamBase.id189 = \"on\"; }\n  // 呼叫等待中来电显示\n  if(func.indexOf(\"441\") != -1) { reqParamBase.id441 = \"on\"; }\n  // 转接外线\n  if(func.indexOf(\"593\") != -1) { reqParamBase.id593 = \"on\"; }\n  // 呼叫限制\n  if(func.indexOf(\"893\") != -1) { reqParamBase.id893 = \"on\"; }\n  // 禁止被强插\n  if(func.indexOf(\"394\") != -1) { reqParamBase.id394 = \"on\"; }\n  // 即时录音\n  if(func.indexOf(\"359\") != -1) { reqParamBase.id359 = \"on\"; }\n  // 分机锁\n  if(func.indexOf(\"592\") != -1) { reqParamBase.id592 = \"1\"; }\n  // 呼叫转移\n  if(func.indexOf(\"436\") != -1) { reqParamBase.id436 = \"on\"; }\n  // 允许话机设置免打扰\n  if(func.indexOf(\"444\") != -1) { reqParamBase.id444 = \"on\"; }\n\n  var reqParams = [];\n  // dod起始号码\n  var dodBeginNumber = parseInt(beginLongNumber);\n  // 分机起始号码\n  var telephoneBeginNumber = parseInt(beginTelephone);\n  // line_id起始号码\n  //var lineIdBeginNumber = window.id1369 + 1;\n\n  // 批量生成\n  var tempReqParam = [];\n\n  for(var i = 0; i < batchQuantity; i++) {\n    var reqParam = {};\n\n    //reqParam.import = \"ext\";\n    // line_id\n    //reqParam.line_id = lineIdBeginNumber++;\n\n    // 分机号码\n    reqParam.id401 = telephoneBeginNumber++;\n\n      // dod\n      if(dodGenType && !isNaN(dodBeginNumber)) {\n        reqParam.id1302 = dodGenType == \"0\" ? dodBeginNumber : dodBeginNumber++;\n      }\n\n      // 密码\n      if(passwordGenType != \"\") {\n        reqParam.id591 = passwordGenType == \"0\" ? \n          randomPass(passwordConsist, passwordLength) :\n        password;\n      }\n\n    $.extend(true, reqParam, reqParamBase);\n\n    tempReqParam.push(reqParam);\n\n    // 当单条请求的批量数到达上限时\n    if(tempReqParam.length >= MAX_BATCH_ADD_COUNT) {\n      reqParams.push($.merge([], tempReqParam));\n      tempReqParam = [];\n    }\n  }\n\n  // push未添加的数据\n  if(tempReqParam.length) {\n    reqParams.push($.merge([], tempReqParam));\n  }\n\n  $.console.log(reqParams);\n\n  return {\n    // 起始分机号\n    beginTelephone: parseInt(beginTelephone),\n    // 结束分机号\n    endTelephone: parseInt(beginTelephone) + parseInt(batchQuantity) - 1,\n    batchQuantity: batchQuantity,\n    // 请求参数\n    reqParams: reqParams\n  };\n};\n\nform.onLoaded = function() {\n  //$('[name=\"begin-long-number\"]').parents(\".form-group\").hide();\n\n  $(document).on(\"change\", '[name=\"dod-gen-type\"]', function() {\n    if($(this).val() == \"\") {\n      $('[name=\"begin-long-number\"]').parents(\".form-group\").hide();\n    }\n    else {\n      $('[name=\"begin-long-number\"]').parents(\".form-group\").show();\n    }\n  });\n\n  $('[name=\"password-length\"], [name=\"password-consist\"], [name=\"password\"]').parents(\".form-group\").hide();\n\n  $('[name=\"password-gen-type\"]').change(function() {\n    if($(this).val() == \"1\") {\n      $('[name=\"password\"]').parents(\".form-group\").show();\n      $('[name=\"password-length\"], [name=\"password-consist\"]').parents(\".form-group\").hide();\n    }\n    else {\n      $('[name=\"password\"]').parents(\".form-group\").hide();\n      $('[name=\"password-length\"], [name=\"password-consist\"]').parents(\".form-group\").show();\n    }\n  });\n  \n  $('[name=\"id367\"]').parents(\".form-group\").hide();\n  \n  $('[name=\"call-transfer\"]').change(function() {\n    switch($(this).val()) {\n      case \"1\":\n      case \"2\":\n      case \"3\":\n      case \"4\":\n        $('[name=\"id367\"]').parents(\".form-group\").show();\n        break;\n      default:\n        $('[name=\"id367\"]').parents(\".form-group\").hide();\n        break;\n    }\n  });\n\n  avalon.vmodels[\"func\"].onChange = function(value, changedOption, optionIndex) {\n    // 取消被叫转接时，连带取消主叫转接（与老OM功能保持一致）\n    if(changedOption.value == \"861\" && \n      changedOption.checked == false &&\n      avalon.vmodels[\"func\"].value.indexOf(\"439\") != -1) {\n        avalon.vmodels[\"func\"].value.splice(avalon.vmodels[\"func\"].value.indexOf(\"439\"), 1);\n    }\n\n    // 勾选主叫转接时，连带勾选被叫转接（与老OM功能保持一致）\n    if(changedOption.value == \"439\" && \n      changedOption.checked == true && \n      avalon.vmodels[\"func\"].value.indexOf(\"861\") == -1) {\n        avalon.vmodels[\"func\"].value.push(\"861\");\n    }\n  }\n};","style":"@charset \"utf-8\";\n/*删除本行在这里写css样式*/\n.btn-ok,\n.btn-cancel {\n  display: none;\n}"}
]
